function confirmCallback(e,t,a){load(e,t,a)}function load(e,t,a){if("myexercises"===$(".current-page").html()&&$(".current-page").html()!==e&&($(".myexercises-new-name").val().length>0||$(".myexercises-new-muscle :selected").length>0||$(".myexercises-new-type :selected").length>0))return $(".accept-move").unbind(),$("#confirmModal").modal(),$(".accept-move").on("click",function(){$(".myexercises-new-name").val(""),$(".myexercises-new-muscle :selected").removeAttr("selected"),$(".myexercises-new-type :selected").removeAttr("selected"),load(e,t,a)}),void $(".loader").hide();if("myworkouts"===$(".current-page").html()&&$(".current-page").html()!==e&&($(".myworkouts-new-name").val().length>0||$(".new-workout.myexercises-list tr").length>0))return $(".accept-move").unbind(),$("#confirmModal").modal(),$(".accept-move").on("click",function(){$(".myworkouts-new-name").val(""),$(".new-workout.myexercises-list").html(""),load(e,t,a)}),void $(".loader").hide();if("myprograms"===$(".current-page").html()&&$(".current-page").html()!==e&&($(".myprograms-new-name").val().length>0||$(".myprograms-new-duration").val().length>0))return $(".accept-move").unbind(),$("#confirmModal").modal(),$(".accept-move").on("click",function(){$(".myprograms-new-name").val(""),$(".myprograms-new-duration").val(""),load(e,t,a)}),void $(".loader").hide();$(".loader").show();var s="mydiary"===e||"undefined"==typeof a||"undefined"==typeof a.id;"viewprofile"!==e&&"viewdiary"!==e&&s||(s||(e="viewdiary"),e=e+"/"+a.id),$(".current-page").html(e),window.location.hash=e,$(".sidebar-menu-item").removeClass("active"),("mydiary"===e||"myexercises"===e||"myworkouts"===e||"myprograms"===e||"mystats"===e)&&$("."+e).addClass("active"),t(a),$(".loader").hide()}function profilePage_Load(e){var t=e.id;$.get("viewprofile.html",function(e){$(".load-into-container").html(e);var a=t;if(mlpObject.getUsers({id:a}).result.success===!0){myProfile_MainClickRegisterFunction();var s=mlpObject.result.data;myProfile_appendHTML(s);var r="Withdraw request";for(var i in s.acceptedfriends)s.acceptedfriends[i].friendid===s.userid&&($(".profile-info").append('<a href="#viewdiary/'+s.userid+'" class="btn btn-primary view-diary'+s.userid+'">View diary</a><br/>'),r="Remove friend",$(".view-diary"+s.userid).on("click",function(e){e.preventDefault(),load("viewdiary",diaryPage_Load,{id:s.userid,date:moment()})}));$(".profile-friend-button").html(s.friends.indexOf(s.userid)>-1?'<button onclick="searchPage_RemoveFriend('+s.userid+')" class="btn btn-danger remove-friend" style="margin-bottom: 10px;">'+r+"</button>":'<button onclick="searchPage_AddFriend('+s.userid+')" class="btn btn-success add-friend" style="margin-bottom: 10px;">Add friend</button>'),$(".profile-info").addClass("user-"+s.userid)}else $(".bottom-right").notify({type:"danger",message:{text:"Failed to load profile"}}).show()})}function diaryPage_Load(e){var t=e.id,a=e.date;$(".sidebar-menu-item").removeClass("active");var a=moment(a).format("YYYY-MM-DD");$.get("viewdiary.html",function(e){$(".load-into-container").html(e),$("[data-toggle='tooltip']").tooltip(),$(".selected-date").html(moment(a).format("dddd, MMMM Do, YYYY")),$(".selected-date-hidden").html(a),$(".input-group.date").datepicker({orientation:"top left",todayHighlight:!0,autoclose:!0}),$(".change-date-left").on("click",function(){load("diarypage",diaryPage_Load,{id:t,date:moment($(".selected-date-hidden").text()).subtract(1,"days").calendar("YYYY-MM-DD")})}),$(".change-date-right").on("click",function(){$(".loader").show(),load("diarypage",diaryPage_Load,{id:t,date:moment($(".selected-date-hidden").text()).add(1,"days").calendar("YYYY-MM-DD")})}),$(".change-date-input").on("change",function(){$(".loader").show(),load("diarypage",diaryPage_Load,{id:t,date:moment($(".change-date-input").val())})});var s=mlpObject.selectResults({assigneddate:a,userid:t}).result;if(s.success===!0){$(".diary-username").html(s.data[0].username);var r=[];for(var i in s.data){var o=s.data[i],l=s.data[i].name,d=s.data[i].records,n=["Best reps with "+d.amrap.weight+$(".units").html()+": "+d.amrap.reps+"@rpe"+d.amrap.rpe,d.overall.rep+"RM: "+d.overall.max+$(".units").html(),"Best volume for "+o.reps+" rep sets: "+d.backoffs.best+$(".units").html(),"Last time you did "+d.history.sets+"x"+d.history.reps+" using "+d.history.weight+$(".units").html()];l in r?r[l].push({id:o.id,exercise:l,exerciseid:o.exerciseid,reps:o.reps,set:o.sets,weight:o.weight,rpe:o.rpe,onerm:o.percentage,notes:o.notes,records:n}):r[l]=[{id:o.id,exercise:l,exerciseid:o.exerciseid,reps:o.reps,set:o.sets,weight:o.weight,rpe:o.rpe,onerm:o.percentage,notes:o.notes,records:n}]}}else"Not Loaded"===$(".diary-username").html()&&mlpObject.getUsers({id:t}).result.success===!0&&$(".diary-username").html(mlpObject.result.data.username),$(".my-exercises").html('<span style="display: block;text-align:center;margin-top:-10px;">Slack off day</span>');for(var c in r)myDiary_appendHTML(r[c].sort(function(e,t){return e.set>t.set?1:e.set<t.set?-1:0}));$(".details.add").remove(),"ontouchstart"in window||$("[title]").tooltip()})}function searchPage_Load(){$.get("search.html",function(e){$(".load-into-container").html(e),$(".search-btn.findusers-search").on("click",function(){var e=$(".search-form.findusers-search").val();if(""===e)return void $(".search-results").html("");if(mlpObject.getUsers({username:e}),mlpObject.result.success===!0){$(".add-friend").unbind(),$(".remove-friend").unbind(),$(".search-results").html("");for(var t in mlpObject.result.data)searchPage_appendHTML(mlpObject.result.data[t])}else $(".search-results").html('<span style="font-weight:bold;text-align:center;">No users found</span>'),$(".bottom-right").notify({type:"danger",message:{text:"No users found"}}).show();searchPage_UpdateRequests()}),$(".search-form.findusers-search").keypress(function(e){13===e.which&&$(".search-btn.findusers-search").click()}),""!==$(".search-form.findusers-mainnav").val()?($(".search-form.findusers-search").val($(".search-form.findusers-mainnav").val()),$(".search-btn.findusers-search").click()):searchPage_UpdateRequests(),$(".invite-form").on("submit",function(e){e.preventDefault(),mlpObject.inviteFriend({email:$(".searchpage-inviteemail").val()}),mlpObject.result.success===!0?$(".bottom-right").notify({type:"info",message:{text:"Invite sent"}}).show():$(".bottom-right").notify({type:"danger",message:{text:"Failed to send invite"}}).show()})})}function searchPage_RemoveFriend(e){mlpObject.removeFriend({friendid:e}),mlpObject.result.success===!0?($(".bottom-right").notify({type:"info",message:{text:"Friend removed"}}).show(),$(".user-"+e+" .search-add").html('<button onclick="searchPage_AddFriend('+e+')" class="btn btn-success add-friend" style="margin-bottom: 10px;">Add friend</button>'),searchPage_UpdateRequests()):$(".bottom-right").notify({type:"danger",message:{text:"Failed to remove friend"}}).show()}function searchPage_AddFriend(e){mlpObject.addFriend({friendid:e}),mlpObject.result.success===!0?($(".bottom-right").notify({type:"info",message:{text:"Friend request sent"}}).show(),$(".user-"+e+" .search-add").html('<button onclick="searchPage_RemoveFriend('+e+')" class="btn btn-danger remove-friend" style="margin-bottom: 10px;">Remove friend</button>'),searchPage_UpdateRequests()):$(".bottom-right").notify({type:"danger",message:{text:"Failed to add friend"}}).show()}function searchPage_appendHTML(e){var t=$(".userid").html();if(e.userid!==t){var a='<div class="row user-'+e.userid+'"><div class="col-xs-6"><div class="profle-picture" style="border-radius:20px;  float:right;  overflow:hidden;margin-top: 15px;"><img src="'+encodeURI(e.dp.replace(/['"]+/g,""))+'" style="vertical-align:bottom;padding:0px;display: inline-block;" class="search-dp"><br></div></div><div class="col-xs-6" style="padding: 1em 0;"><div class="search-id" style="display:none;">'+e.userid+'</div><div style="margin-bottom: 10px;"><h3 class="search-username"  style="margin-top: 0px;display:inline;">'+e.username+"</h3></div>",s="Withdraw request";for(var r in e.acceptedfriends)e.acceptedfriends[r].friendid===e.userid&&(s="Remove friend");a=e.friends.indexOf(e.userid)>-1?a+'<div class="search-add"><button onclick="searchPage_RemoveFriend('+e.userid+')" class="btn btn-danger remove-friend" style="margin-bottom: 10px;">'+s+"</button></div>":a+'<div class="search-add"><button onclick="searchPage_AddFriend('+e.userid+')" class="btn btn-success add-friend" style="margin-bottom: 10px;">Add friend</button></div>',a=a+'<div class="search-view"><a href="#viewprofile/'+e.userid+'" class="btn btn-primary view-profile'+e.userid+'">View profile</a></div></div></div><hr>  ',$(".search-results").append(a),$(".view-profile"+e.userid).on("click",function(t){t.preventDefault(),load("viewprofile",profilePage_Load,{id:e.userid})})}}function searchPage_UpdateRequests(){if($(".request-results").html(""),mlpObject.getRequests().result.success===!0){$(".request-total").html(mlpObject.result.data.length);for(var e in mlpObject.result.data)searchPage_appendRequestHTML(mlpObject.result.data[e])}else $(".bottom-right").notify({type:"danger",message:{text:"No requests"}}).show()}function searchPage_appendRequestHTML(e){var t='<div class="row user-'+e.userid+'"><div class="col-xs-6"><div class="profle-picture" style="border-radius:20px;  float:right;  overflow:hidden;margin-top: 15px;"><img src="'+encodeURI(e.dp.replace(/['"]+/g,""))+'" style="vertical-align:bottom;padding:0px;display: inline-block;" class="search-dp"><br></div></div><div class="col-xs-6" style="padding: 1em 0;text-align: left;"><div class="search-id" style="display:none;">'+e.userid+'</div><div style="margin-bottom: 10px;"><h3 class="search-username"  style="margin-top: 0px;display:inline;">'+e.username+'</h3></div><div class="search-add"><button onclick="searchPage_AddFriend('+e.userid+')" class="btn btn-success add-friend" style="margin-bottom: 10px;">Accept</button><button onclick="searchPage_RemoveFriend('+e.userid+')" class="btn btn-danger add-friend" style="margin-bottom: 10px;margin-left: 10px;">Reject</button></div><div class="search-view"><a href="#viewprofile/'+e.userid+'" class="btn btn-primary view-profile'+e.userid+'">View profile</a></div></div></div><hr>  ';$(".request-results").append(t),$(".view-profile"+e.userid).on("click",function(t){t.preventDefault(),load("viewprofile",profilePage_Load,{id:e.userid})})}function helpPage_Load(){$.get("help.html",function(e){$(".load-into-container").html(e),moveScroller("#helpnav-anchor","#helpnav"),helpPage_MuscleModal()})}function helpPage_MuscleModal(){$(".bodyarea-val").on("change",function(){{var e=($("option:selected",this),this.value);$(".current-results").html()}$(".bodyarea").hide(),$(".current-results").html(e.split(" ")[0]),"Upper Body"===e?$(".iscircular").show():"Lower Body"===e?$(".iscircular").show():($(".result-container").css({padding:"0 15px"}),$(".current-results").append(", Rectus Abdominis"),$(".current-results").css({"font-weight":"bold"}))}),$(".iscircular-val").on("change",function(){var e=($("option:selected",this),this.value),t=$(".current-results").html();$(".iscircular").hide(),"Yes"===e?("Upper"===t,$(".ismovingaway").show(),$(".current-results").append(", Isolation")):("Upper"===t?$(".ismovingaway").show():$(".israisingheel").show(),$(".current-results").append(", Compound"))}),$(".ismovingaway-val").on("change",function(){var e=($("option:selected",this),this.value),t=$(".current-results").html();$(".ismovingaway").hide(),"Upper, Isolation"===t?"Yes"===e?($(".current-results").append(", Shoulders, Triceps, Deltoids"),$(".result-container").css({padding:"0 15px"}),$(".current-results").css({"font-weight":"bold"})):($(".current-results").append(", Bicep, Pectoralis"),$(".result-container").css({padding:"0 15px"}),$(".current-results").css({"font-weight":"bold"})):"Lower, Isolation"===t?"Yes"===e?($(".current-results").append(", Legs, Quadriceps"),$(".result-container").css({padding:"0 15px"}),$(".current-results").css({"font-weight":"bold"})):($(".current-results").append(", Legs, Hamstrings, Gluteus"),$(".result-container").css({padding:"0 15px"}),$(".current-results").css({"font-weight":"bold"})):"Upper, Compound"===t&&("Yes"===e?($(".current-results").append(", Push, Press, Deltoids, Triceps, Pectoralis"),$(".result-container").css({padding:"0 15px"}),$(".current-results").css({"font-weight":"bold"})):($(".current-results").append(", Pull, Latissimus Dorsi, Trapezius, Rhomboids"),$(".result-container").css({padding:"0 15px"}),$(".current-results").css({"font-weight":"bold"})))}),$(".israisingheel-val").on("change",function(){{var e=($("option:selected",this),this.value);$(".current-results").html()}$(".israisingheel").hide(),"Yes"===e?($(".current-results").append(", Legs, Gastrocnemius, Soleus"),$(".result-container").css({padding:"0 15px"}),$(".current-results").css({"font-weight":"bold"})):($(".current-results").append(", Legs, Quadriceps, Hamstrings"),$(".result-container").css({padding:"0 15px"}),$(".current-results").css({"font-weight":"bold"}))})}function termsPage_Load(){$.get("terms.html",function(e){$(".load-into-container").html(e)})}function privacyPage_Load(){$.get("privacy.html",function(e){$(".load-into-container").html(e)})}function contactPage_Load(){$.get("contact.html",function(e){$(".load-into-container").html(e)})}function apiPage_Load(){$.get("api.html",function(e){$(".load-into-container").html(e)})}function myProfile_Load(){$.get("profile.html",function(e){$(".load-into-container").html(e);var t=$(".userid").html();if(mlpObject.getUsers({id:t}).result.success===!0){myProfile_MainClickRegisterFunction();var a=mlpObject.result.data;myProfile_appendHTML(a)}else $(".bottom-right").notify({type:"danger",message:{text:"Failed to load profile"}}).show();"ontouchstart"in window||$("[title]").tooltip({delay:{show:500,hide:0}})})}function myProfile_OnermCalc(e){$(".modal-new-"+e+"-item .calculate-onerm").unbind("click"),$(".modal-new-"+e+"-item .calculate-onerm").on("click",function(t){var t=$(t.target),a=t.closest(".row").attr("class").split(" ")[2].split("-")[1],s=0;mlpObject.getMax({exerciseid:a}).result.success===!0?s=mlpObject.result.data.onerm:$(".bottom-right").notify({type:"danger",message:{text:"Failed to find a max"}}).show(),$("."+e+"exercise-"+a+" .onerm").val(s)})}function myProfile_MainClickRegisterFunction(){$(".btn-circle-main").on("click",function(){myDiary_NewModelInitialiseExercises(),$(".modal-new-inputs.modal-new-main").html('<div class="modal-new-input"><select class="form-control type" style="width: 70%;"><option>Actual</option><option>Estimated</option></select></div><div class="modal-new-input"><a href="javascript:void(0);" class="btn btn-primary calculate-onerm" title="Automatically calculates your one rep max based on your diary entries">Calculate</a></div><div class="modal-new-input"><input type="number" class="form-control onerm" placeholder="1RM" step="0.01" min="0"></div>'),myProfile_OnermCalc("recent"),$("#newModal").modal(),$(".search-btn, .pagination.search").on("click",function(){$(".modal-exercises .modal-new-search-item .modal-new-inputs.modal-new-main").html('<div class="modal-new-input"><select class="form-control type" style="width: 70%;"><option>Actual</option><option>Estimated</option></select></div><div class="modal-new-input"><a href="javascript:void(0);" class="btn btn-primary calculate-onerm" title="Automatically calculates your one rep max based on your diary entries">Calculate</a></div><div class="modal-new-input"><input type="number" class="form-control onerm" placeholder="1RM" step="0.01" min="0"></div>'),myProfile_OnermCalc("search")}),$(".pagination.recent").on("click",function(){$(".modal-exercises .modal-new-recent-item .modal-new-inputs.modal-new-main").html('<div class="modal-new-input"><select class="form-control type" style="width: 70%;"><option>Actual</option><option>Estimated</option></select></div><div class="modal-new-input"><a href="javascript:void(0);" class="btn btn-primary calculate-onerm" title="Automatically calculates your one rep max based on your diary entries">Calculate</a></div><div class="modal-new-input"><input type="number" class="form-control onerm" placeholder="1RM" step="0.01"></div>'),myProfile_OnermCalc("recent")})}),$(".accept-add").on("click",function(){$(".modal-new-checkbox:checked").each(function(){var e=$(this),t=!1;selectedPaginatedItems.each(function(){return e.attr("class")===$(this).attr("class")?(t=!0,!1):void 0}),t===!1&&selectedPaginatedItems.push(this)});var e=selectedPaginatedItems;e.each(function(){var e=$(this),t=e.attr("class").split(" ")[1],a=t.split("-")[1],s=$("."+t+" .onerm").val(),r=$("."+t+" .type").val();mlpObject.addStats({exerciseid:a,onerm:s,type:r}).result.success===!1&&$(".bottom-right").notify({type:"danger",message:{text:"Failed to add a max"}}).show()}),$(".bottom-right").notify({type:"info",message:{text:"Maxes added"}}).show(),$("body").removeClass("modal-open"),$("body").css("padding-right","0px"),load("profile",myProfile_Load)}),$(".delete-account").on("click",function(){$("#profile-deleteModal").modal()}),$(".accept-delete").on("click",function(){mlpObject.deleteUser({id:$(".userid").html()}),mlpObject.logout(),document.location.href="login.html"}),$(".edit-profile").on("click",function(){$("#profile-editModal").modal()}),$(".accept-edit").on("click",function(){var e=$(".edit-profile-weight").val(),t=$(".edit-profile-gender").val(),a=$(".edit-profile-age").val(),s=$(".edit-profile-about").val(),r=$(".edit-profile-why").val(),i=$(".edit-profile-goals").val();mlpObject.updateProfile({userid:$(".userid").html(),weight:e,gender:t,age:a,about:s,why:r,goals:i}),mlpObject.result.success===!0?($(".bottom-right").notify({type:"info",message:{text:"Profile updated"}}).show(),$("body").removeClass("modal-open"),$("body").css("padding-right","0px"),load("profile",myProfile_Load)):$(".bottom-right").notify({type:"danger",message:{text:"Error updating profile"}}).show()}),$(".change-dp").on("click",function(){$("#profile-imageModal").modal()}),$(".accept-image-edit").on("click",function(){if(!checkURL($(".edit-profile-url").val()))return void $(".bottom-right").notify({type:"info",message:{text:"Enter a valid image"}}).show();var e=new Image;e.src=$(".edit-profile-url").val(),e.onload=function(){120===this.width||120===this.height?(mlpObject.updateProfile({userid:$(".userid").html(),dp:'"'+$(".edit-profile-url").val()+'"'}),mlpObject.result.success===!0?($(".user-dp").css({"background-image":"url("+$(".edit-profile-url").val()+")"}),$(".bottom-right").notify({type:"info",message:{text:"Profile picture updated"}}).show(),$("body").removeClass("modal-open"),$("body").css("padding-right","0px"),load("profile",myProfile_Load)):$(".bottom-right").notify({type:"danger",message:{text:"Error updating profile picture"}}).show()):$(".bottom-right").notify({type:"info",message:{text:"Image needs to be 120x120"}}).show()}})}function myProfile_appendHTML(e){$(".profile-dp").attr("src",e.dp.split('"')[1]),$(".profile-username").html(e.username),$(".profile-email").html(e.email),$(".weight").html(e.weight+e.units),$(".gender").html(e.gender),$(".age").html(e.age),null!==e.fbid&&($(".profile-facebook").html(" Connected"),$(".fb-button").css({"background-color":"#ccc"}),$(".fb-button").attr("disabled","true")),null!==e.gpid&&($(".profile-gplus").html(" Connected"),$(".gp-button").css({"background-color":"#ccc",cursor:"default"}),$(".gp-button").attr("disabled","true")),$(".profile-about").html(e.about),$(".profile-why").html(e.why),$(".profile-goals").html(e.goals);for(var t in e.stats){var a=e.stats[t];$(".profile-maxes").append('<div class="profile-max-'+a.exerciseid+'">'+a.name+": "+a.onerm+e.units+" ("+a.type+")")}$(".edit-profile-weight").val(e.weight),$(".edit-profile-gender").val(e.gender),$(".edit-profile-age").val(e.age),$(".edit-profile-about").val(e.about),$(".edit-profile-why").val(e.why),$(".edit-profile-goals").val(e.goals),$(".edit-profile-url").val(e.dp.split('"')[1]);var s="";for(var t in e.acceptedfriends){var r=e.acceptedfriends[t];t%3==0&&(0!=t&&(s+="</div>"),s+='<div class="row">'),s=s+'<div class="col-md-4"><div class="friends-picture" style="border-radius:10px;  float:right;  overflow:hidden;"><a href="#viewprofile/'+r.friendid+"\" onclick=\"load('viewprofile',profilePage_Load, {'id':"+r.friendid+'});return false;"><img src="'+r.dp.replace(/['"]+/g,"")+'" style="width:60px;height:60px; vertical-align:bottom;padding:0px;display: inline-block;" class="friends-dp"></a><br/></div><div class="friends-username" style="margin-left: -25px;margin-top: 40px;"><a href="#viewprofile/'+r.friendid+"\" onclick=\"load('viewprofile',profilePage_Load, {'id':"+r.friendid+'});return false;" style="" class="friends-username-text">'+r.username+"</a></div></div>"}s+="</div>",$(".profile-friends").html(s)}function mySettings_Load(){$.get("settings.html",function(e){$(".load-into-container").html(e),$(".new-unit").val($(".units").html()),mySettings_MainClickRegisterFunction()})}function mySettings_MainClickRegisterFunction(){$(".password-change").on("click",function(e){e.preventDefault();var t=$(".userid").html(),a=$(".new-password-current").val(),s=$(".new-password").val(),r=$(".new-password-repeat").val();return s!==r?void $(".bottom-right").notify({type:"danger",message:{text:"Passwords didn't match"}}).show():s.length<6?void $(".bottom-right").notify({type:"danger",message:{text:"Password must be at least 6 characters"}}).show():(mlpObject.updateUser({id:t,password:s,oldpassword:a}),void(mlpObject.result.success===!0?($(".bottom-right").notify({type:"info",message:{text:"Password changed"}}).show(),$(".new-password-current").val(""),$(".new-password").val(""),$(".new-password-repeat").val(""),$(".change-password").slideToggle()):$(".bottom-right").notify({type:"danger",message:{text:"Current password was incorrect"}}).show()))}),$(".email-change").on("click",function(e){e.preventDefault();var t=$(".userid").html(),a=$(".new-email-password").val(),s=$(".new-email").val();mlpObject.updateUser({id:t,password:a,email:s}),mlpObject.result.success===!0?($(".bottom-right").notify({type:"info",message:{text:"Email changed"}}).show(),$(".new-email-password").val(""),$(".new-email").val(""),$(".change-email").slideToggle()):"Password was incorrect"===mlpObject.result.data?$(".bottom-right").notify({type:"danger",message:{text:"Password was incorrect"}}).show():$(".bottom-right").notify({type:"danger",message:{text:"Failed updating email"}}).show()}),$(".pref-change").on("click",function(e){e.preventDefault();var t=$(".userid").html(),a=parseInt($(".new-pref").val());mlpObject.updateSettings({userid:t,emailpreferences:a}),mlpObject.result.success===!0?($(".bottom-right").notify({type:"info",message:{text:"Email preferences changed"}}).show(),$(".change-preferences").slideToggle()):$(".bottom-right").notify({type:"danger",message:{text:"Failed to update email preferences"}}).show()}),$(".unit-change").on("click",function(e){e.preventDefault();var t=$(".userid").html(),a=$(".new-unit").val();mlpObject.updateSettings({userid:t,units:a}),mlpObject.result.success===!0?($(".units").html(a),$(".bottom-right").notify({type:"info",message:{text:"Units changed"}}).show(),$(".change-units").slideToggle()):$(".bottom-right").notify({type:"danger",message:{text:"Failed to update units"}}).show()})}function myStats_Load(){$.get("mystats.html",function(e){$(".load-into-container").html(e),$("[data-toggle='tooltip']").tooltip(),myStats_MainClickRegisterFunction();var t=$(".mystats-metric").val(),a=$(".duration-button.active").html(),s=$(".search-form.mystats-search").val(),r=$(".mystats-type").val(),i=$(".mystats-accumulation").val(),o={metric:t,timeframe:a,name:s,type:r,accumulation:i};if(mlpObject.getData(o),mlpObject.result.success===!0){$(".mystats-currentview").html(""===s?t+" for "+r.toLowerCase():t+" for "+s.toLowerCase());for(var l in mlpObject.result.data){var d=mlpObject.result.data[l].x,n=mlpObject.result.data[l].y;mlpObject.result.data[l].x=new Date(d),mlpObject.result.data[l].y=parseInt(n)}myStats_LoadGraph(mlpObject.result.data)}})}function myStats_MainClickRegisterFunction(){$(".mystats-update").on("click",function(){var e=$(".mystats-metric").val(),t=$(".duration-button.active").html(),a=$(".search-form.mystats-search").val(),s=$(".mystats-type").val(),r=$(".mystats-accumulation").val(),i={metric:e,timeframe:t,name:a,type:s,accumulation:r};if(mlpObject.getData(i),mlpObject.result.success===!0){$(".bottom-right").notify({type:"info",message:{text:"Graph loaded"}}).show(),$(".mystats-currentview").html(""===a?e+" for "+s.toLowerCase():e+" for "+a.toLowerCase());for(var o in mlpObject.result.data){var l=mlpObject.result.data[o].x,d=mlpObject.result.data[o].y;mlpObject.result.data[o].x=new Date(l),mlpObject.result.data[o].y=parseInt(d)}myStats_LoadGraph(mlpObject.result.data)}else $(".bottom-right").notify({type:"danger",message:{text:"No data to load"}}).show()}),$(".mystats-type").on("change",function(){$(".search-form.mystats-search").val("")}),$(".search-form.mystats-search").on("change",function(){$(".mystats-type").val("")}),$(".search-btn.mystats-search").on("click",function(){$(".mystats-modal.search-form").val($(".search-form.mystats-search").val()),$(".modal-new-search-term").html($(".mystats-modal.search-form").val()),""!==$(".search-form.mystats-search").val()&&$(".mystats-modal.search-btn").click(),$("#newModal").modal()}),$(".search-form.mystats-search").keypress(function(e){13===e.which&&$(".search-btn.mystats-search").click()}),$(".mystats-modal.search-form").keypress(function(e){13===e.which&&$(".mystats-modal.search-btn").click()}),$(".mystats-select-btn").on("click",function(){$(".search-form.mystats-search").val($("input[name=radio-exercise-select]:checked",".modal-search-results").val()),$(".mystats-type").val(""),$(".mystats-update").click()}),$(".mystats-modal.search-btn").on("click",function(){if($(".modal-new-search-term").html($(".mystats-modal.search-form").val()),$(".modal-search-results").html(""),mlpObject.getExercises({name:$(".mystats-modal.search-form").val()}),mlpObject.result.success===!0)for(var e in mlpObject.result.data){if(e>9)break;myStats_appendExerciseSelectModalHTML(mlpObject.result.data[e])}else $(".bottom-right").notify({type:"danger",message:{text:"No exercises found"}}).show()}),$(".duration-button").on("click",function(e){var e=$(e.target),t=e.attr("class").split(" ")[3];$(".duration-button").removeClass("active"),$("."+t).addClass("active"),$(".mystats-update").click()}),$(".mystats-metric").on("change",function(){$(".mystats-update").click()}),$("#newModal").on("hidden.bs.modal",function(){$(".modal-search-results").html("")})}function myStats_appendExerciseSelectModalHTML(e){var t='<div class="row" style="padding:10px 0;"><input type="radio" name="radio-exercise-select" class="selected-exercise" style="margin-right: 10px;" value="'+e.name+'">'+e.name+"</div>";$(".modal-search-results").append(t)}function myStats_LoadGraph(e){var t=new CanvasJS.Chart("chartContainer",{axisX:{valueFormatString:"DD MMM YYYY"},axisY:{valueFormatString:"#,###"},data:[{type:"line",dataPoints:e}]});t.render()}function myExercises_Load(){$.get("myexercises.html",function(e){$(".load-into-container").html(e),$("[data-toggle='tooltip']").tooltip(),myExercises_MainClickRegisterFunction();var t=$(".userid").html();if(mlpObject.getExercises({userid:t}),mlpObject.result.success===!0)var a=mlpObject.result.data;else console.log("Failed to get exercises, maybe you dont have any!");for(var s in a)myExercises_appendHTML(a[s]);"ontouchstart"in window||$("[title]").tooltip({delay:{show:500,hide:0}})})}function myExercises_MainClickRegisterFunction(){$(".myexercises-addtoModal-accept").on("click",function(){var e=$(".myexercises-addtoModal-id").html(),t={sets:"1",exerciseid:e,assigneddate:moment().format("YYYY-MM-DD"),weight:"0",reps:"0",rpe:"0",percentage:"0"};mlpObject.addResults(t).result.success===!1?$(".bottom-right").notify({type:"info",message:{text:"Failed to add this exercise to your diary"}}).show():$(".bottom-right").notify({type:"info",message:{text:"Exercise added to your diary"}}).show()}),$(".myexercises-create").on("click",function(e){e.preventDefault();var t=$(".myexercises-new-name").val();if(""===t)return void $(".bottom-right").notify({type:"danger",message:{text:"Enter an exercise name"}}).show();var a="",s=$(".myexercises-new-muscle").val();for(var r in s)0!=r&&(a+=", "),a+=s[r];var i="",o=$(".myexercises-new-type").val();for(var r in o)0!=r&&(i+=", "),i+=o[r];mlpObject.createExercise({name:t,musclegroup:a,type:i}),mlpObject.result.success===!0?$(".bottom-right").notify({type:"info",message:{text:"New exercise added"}}).show():$(".bottom-right").notify({type:"danger",message:{text:"Exercise already exists!"}}).show(),load("myexercises",myExercises_Load)}),$(".myexercises-search.search-form").keypress(function(e){13===e.which&&$(".myexercises-search.search-btn").click()}),$(".myexercises-search.search-btn").on("click",function(){var e=$(".myexercises-search.search-form").val(),t=$(".userid").html();if($(".myexercises-list").html(""),mlpObject.getExercises({userid:t,name:e}),mlpObject.result.success===!0)var a=mlpObject.result.data;else $(".myexercises-list").html('<span style="font-weight:bold;text-align:center;">No exercises found</span>'),$(".bottom-right").notify({type:"danger",message:{text:"No exercises found"}}).show();for(var s in a)myExercises_appendHTML(a[s])}),$(".myexercises-editModal-accept-edit").on("click",function(){var e=$(".myexercises-editModal-id").html(),t=$(".myexercises-editModal-name").val(),a="",s=$(".myexercises-editModal-muscle").val();for(var r in s)0!=r&&(a+=", "),a+=s[r];var i="",o=$(".myexercises-editModal-type").val();for(var r in o)0!=r&&(i+=", "),i+=o[r];mlpObject.updateExercise({id:e,name:t,musclegroup:a,type:i}),mlpObject.result.success===!0?($(".myexercises-"+e+" .myexercises-more").html(t+" "+$(".myexercises-"+e+" .myexercises-more i")[0].outerHTML),$(".myexercises-"+e+" .myexercises-moredata").html(i+"<br/>"+a),$(".bottom-right").notify({type:"info",message:{text:"Exercise changed"}}).show()):$(".bottom-right").notify({type:"danger",message:{text:"Failed to change exercise"}}).show(),$("body").removeClass("modal-open"),$("body").css("padding-right","0px")}),$(".myexercises-deleteModal-accept-delete").on("click",function(){var e=$(".myexercises-deleteModal-id").html();mlpObject.deleteExercise({id:e}),mlpObject.result.success===!0?($(".myexercises-"+e).remove(),$(".bottom-right").notify({type:"info",message:{text:"Exercise deleted"}}).show()):$(".bottom-right").notify({type:"danger",message:{text:"Failed to delete exercise"}}).show(),$("body").removeClass("modal-open"),$("body").css("padding-right","0px")})}function myExercises_appendHTML(e){var t=e.id,a="myexercises-"+t;$(".myexercises-list").append(myExercises_generateHTML(e)),$("."+a+" .myexercises-edit").on("click",function(){$(".myexercises-editModal-id").html(t),$(".myexercises-editModal-name").val(e.name),$(".myexercises-editModal-muscle").val(e.musclegroup.split(", ")),$(".myexercises-editModal-type").val(e.type.split(", ")),$("#myexercises-editModal").modal()}),$("."+a+" .myexercises-delete").on("click",function(){$(".myexercises-deleteModal-id").html(t),$("#myexercises-deleteModal").modal()}),$("."+a+" .myexercises-addresults").on("click",function(){$(".myexercises-addtoModal-id").html(t),$("#myexercises-addtoModal").modal()}),$("."+a+" .myexercises-more").on("click",function(){$("."+a+" .myexercises-moredata").slideToggle()}),toggleCaret("."+a+" .myexercises-more","."+a+" .myexercises-more i","fa-caret-up","fa-caret-down")}function myExercises_generateHTML(e){var t=e.id,a=e.name,s=e.type,r=e.musclegroup,i='<tr class="myexercises-'+t+'" style="border-top: 1px solid #ddd;"><th scope="row" style="line-height: 30px;"><a href="javascript:void(0);" class="myexercises-more">'+a+' <i class="fa fa-caret-down"></i></a>\n            <div class="myexercises-moredata" style="font-weight: initial; display:none;">'+s+"<br/>"+r+'</div></th><td style="float:right; border-top:none;"><a href="javascript:void(0);" class="btn btn-default btn-circle myexercises-addresults" style="margin-right: 2px;" title="Add this exercise to your diary"><i class="fa fa-plus"></i></a><a href="javascript:void(0);" class="btn btn-primary btn-circle myexercises-edit" style="margin-right: 2px;" title="Edit exercise"><i class="fa fa-pencil-square-o"></i></a>';
return i+='<a href="javascript:void(0);" class="btn btn-danger btn-circle myexercises-delete" title="Delete exercise"><i class="fa fa-times"></i></a>',i+="</td></tr >"}function myWorkouts_Load(){$.get("myworkouts.html",function(e){$(".load-into-container").html(e);var t=mlpObject.getWorkouts({userid:$(".userid").html()}).result.data;mlpObject.result.success===!1&&console.log("Failed to get workouts. Maybe you don't have any!");for(var a in t)myWorkouts_appendHTML(t[a]);myWorkouts_MainClickRegisterFunction(),"ontouchstart"in window||$("[title]").tooltip({delay:{show:500,hide:0}})})}function myWorkouts_MainClickRegisterFunction(){$(".myworkouts-addtoModal-accept").on("click",function(){var e=$(".addto-workout-id").html(),t={workoutid:e,assigneddate:moment().format("YYYY-MM-DD")};mlpObject.addResults(t).result.success===!1?$(".bottom-right").notify({type:"info",message:{text:"Failed to add this workout to your diary"}}).show():$(".bottom-right").notify({type:"info",message:{text:"Workout added to your diary"}}).show()}),$(".myworkouts-search.search-form").keypress(function(e){13===e.which&&$(".myworkouts-search.search-btn").click()}),$(".myworkouts-search.search-btn").on("click",function(){var e=$(".myworkouts-search.search-form").val();if(mlpObject.getWorkouts({name:e,userid:$(".userid").html()}),mlpObject.result.success===!0){$(".myworkouts-list").html("");var t=mlpObject.result.data;for(var a in t)myWorkouts_appendHTML(t[a])}else $(".myworkouts-list").html('<span style="font-weight:bold;text-align:center;">No workouts found</span>'),$(".bottom-right").notify({type:"danger",message:{text:"No workouts found"}}).show()}),$(".pagination").on("click",function(){setTimeout(function(){$(".modal-exercises .extra-input").html('<input min="1" type="number" class="form-control sets" placeholder="Sets" step="1">')},500)}),$(".myworkouts-addexercise").on("click",function(){$(".accept-add").addClass("new-workout"),myDiary_NewModelInitialise(),$("#newModal .search-btn").on("click",function(){setTimeout(function(){$(".extra-input").html('<input min="1" type="number" class="form-control sets" placeholder="Sets" step="1">')},500)}),$(".extra-input").html('<input min="1" type="number" class="form-control sets" placeholder="Sets" step="1">'),$(".new-workout.accept-add").on("click",function(){$(".modal-new-checkbox:checked").each(function(){var e=$(this),t=!1;selectedPaginatedItems.each(function(){return e.attr("class")===$(this).attr("class")?(t=!0,!1):void 0}),t===!1&&selectedPaginatedItems.push(this)});var e=selectedPaginatedItems;e.each(function(){var e=$(this),t=e.attr("class").split(" ")[1],a=t.split("-")[1],s=$("."+t+" .sets").val();""===s&&(s="1");var r=$("."+t+" .modal-new-exercise-name").html(),i=$("."+t+" .weight").val(),o=$("."+t+" .reps").val(),l=$("."+t+" .rpe").val(),d=$("."+t+" .percentage").val(),n={sets:s,exerciseid:a,name:r};void 0!==i&&(n.weight=i),void 0!==o&&(n.reps=o),void 0!==l&&(n.rpe=l),void 0!==d&&(n.percentage=d),myWorkouts_NewWorkoutAddExercise(n)}),$(".bottom-right").notify({type:"info",message:{text:"Exercises added"}}).show()}),$("#newModal").modal(),$("#newModal").on("hidden.bs.modal",function(){$(".new-workout.accept-add").unbind(),$(".accept-add").removeClass("new-workout")})}),$(".myworkouts-create").on("click",function(e){e.preventDefault();var t=$(".myworkouts-new-name").val();if(""===t)return void $(".bottom-right").notify({type:"danger",message:{text:"No name was given for the workout"}}).show();var a=mlpObject.createWorkout({name:t}).result;if(a.success===!0){var s=a.data.id,r=1;$(".new-workout.myexercises-list tr").each(function(){var e=$(this),t=e.find(".id").html(),a=e.find(".sets").html(),i=e.find(".reps").html(),o=e.find(".weight").html(),l=e.find(".rpe").html(),d=e.find(".percentage").html();mlpObject.addExercise({exerciseid:t,workoutid:s,ordering:r,reps:i,sets:a,rpe:l,weight:o,percentage:d}),mlpObject.result.success===!1&&$(".bottom-right").notify({type:"danger",message:{text:"There was an error when creating the workout"}}).show(),r+=1}),$(".new-workout.myexercises-list").html(""),$(".myworkouts-new-name").val(""),$(".bottom-right").notify({type:"info",message:{text:"Workout created"}}).show(),load("myworkouts",myWorkouts_Load)}else $(".bottom-right").notify({type:"danger",message:{text:"Unable to create workout"}}).show()}),$(".myworkouts-editModal-accept-edit").on("click",function(){var e=$(".edit-workout-name").val(),t=$(".myworkouts-editModal-workoutid").html();mlpObject.updateWorkout({id:t,name:e}),mlpObject.result.success===!0?($(".bottom-right").notify({type:"info",message:{text:"Workout changed"}}).show(),$(".myworkouts-workout-"+t+" .myexercises-more").html(e+" "+$(".myworkouts-workout-"+t+" .myexercises-more i")[0].outerHTML),$("body").removeClass("modal-open"),$("body").css("padding-right","0px")):$(".bottom-right").notify({type:"danger",message:{text:"Failed to change workout"}}).show()}),$(".myworkouts-accept-delete").on("click",function(){var e=$(".delete-workout-id").html();mlpObject.deleteWorkout({id:e}),mlpObject.result.success===!0?($(".bottom-right").notify({type:"info",message:{text:"Workout deleted"}}).show(),$(".myworkouts-workout-"+e).remove(),$("body").removeClass("modal-open"),$("body").css("padding-right","0px")):$(".bottom-right").notify({type:"danger",message:{text:"Failed to delete workout"}}).show()}),$(".myworkouts-exercise-accept-delete").on("click",function(){var e=$(".delete-id").html();mlpObject.removeExercise({id:e}),mlpObject.result.success===!0?($(".bottom-right").notify({type:"info",message:{text:"Exercise removed"}}).show(),$(".myworkouts-myexercises-"+$(".exercisedata-id").html()).remove(),$("body").removeClass("modal-open"),$("body").css("padding-right","0px")):$(".bottom-right").notify({type:"danger",message:{text:"Failed to remove exercise"}}).show()})}function myWorkouts_NewWorkoutAddExercise(e){var t=Math.floor(1e5*Math.random()),a='<tr class="myworkouts-myexercises-'+e.exerciseid+t+'" style="border-top: 0px;"><td scope="row" style="line-height: 30px; border-top: 0px;"><a href="javascript:void(0);" class="exercise'+e.exerciseid+t+'">'+e.name+' <i class="fa fa-caret-down"></i></a><a href="javascript:void(0);" class="btn btn-default btn-circle myworkouts-myexercises-delete" style="float: right;"><i class="fa fa-remove"></i></a><a href="javascript:void(0);" class="btn btn-default btn-circle myworkouts-myexercises-edit" style="float:right;"><i class="fa fa-pencil-square-o"></i></a><br/><div class="exercise-data" style="margin-left:8px;display:none;"><div class="id" style="display:none;">'+e.exerciseid+'</div><strong>Sets:</strong> <div class="sets" style="display:inline;">'+e.sets+'</div><br/><strong>Reps:</strong> <div class="reps" style="display:inline;">'+e.reps+'</div><br/><strong>Weight:</strong> <div class="weight" style="display:inline;">'+e.weight+'</div><br/><strong>RPE:</strong> <div class="rpe" style="display:inline;">'+e.rpe+'</div><br/><strong>%1RM:</strong> <div class="percentage" style="display:inline;">'+e.percentage+"</div></div></td></tr>";$(".new-workout.myexercises-list").append(a),$(".new-workout .exercise"+e.exerciseid+t).on("click",function(){$(".new-workout .myworkouts-myexercises-"+e.exerciseid+t+" .exercise-data").slideToggle()}),toggleCaret(".new-workout .exercise"+e.exerciseid+t,".new-workout .exercise"+e.exerciseid+t+" i","fa-caret-up","fa-caret-down"),$(".new-workout .myworkouts-myexercises-"+e.exerciseid+t+" .myworkouts-myexercises-edit").on("click",function(){$(".edit-exercise-reps").val(e.reps),$(".edit-exercise-sets").val(e.sets),$(".edit-exercise-rpe").val(e.rpe),$(".edit-exercise-weight").val(e.weight),$(".edit-exercise-percentage").val(e.percentage),$("#myworkouts-exercise-editModal").modal(),$(".myworkouts-exercise-editModal-accept-edit").on("click",function(){$(".new-workout .myworkouts-myexercises-"+e.exerciseid+t+" .reps").html($(".edit-exercise-reps").val()),$(".new-workout .myworkouts-myexercises-"+e.exerciseid+t+" .sets").html($(".edit-exercise-sets").val()),$(".new-workout .myworkouts-myexercises-"+e.exerciseid+t+" .rpe").html($(".edit-exercise-rpe").val()),$(".new-workout .myworkouts-myexercises-"+e.exerciseid+t+" .weight").html($(".edit-exercise-weight").val()),$(".new-workout .myworkouts-myexercises-"+e.exerciseid+t+" .percentage").html($(".edit-exercise-percentage").val()),$(".bottom-right").notify({type:"info",message:{text:"Exercise details changed"}}).show()}),$("#myworkouts-exercise-editModal").on("hidden.bs.modal",function(){$(".myworkouts-exercise-editModal-accept-edit").unbind()})}),$(".new-workout .myworkouts-myexercises-"+e.exerciseid+t+" .myworkouts-myexercises-delete").on("click",function(){$(".new-workout .myworkouts-myexercises-"+e.exerciseid+t).remove(),$(".bottom-right").notify({type:"info",message:{text:"Exercise removed"}}).show()}),$(".workout-table").tableDnD()}function myWorkouts_ExerciseClickRegisterFunction(e,t){toggleCaret(".myworkouts-workout-"+t+" .myworkouts-exercise"+e.exerciseid,".myworkouts-workout-"+t+" .myworkouts-exercise"+e.exerciseid+" i","fa-caret-up","fa-caret-down"),$(".myworkouts-workout-"+t+" .myworkouts-exercise"+e.exerciseid).on("click",function(){$(".myworkouts-workout-"+t+" .exercise-data"+e.exerciseid).slideToggle()}),$(".myworkouts-workout-"+t+" .myworkouts-myexercises-"+e.exerciseid+" .myworkouts-myexercises-edit").on("click",function(){$(".edit-exercise-reps").val(e.reps),$(".edit-exercise-sets").val(e.sets),$(".edit-exercise-rpe").val(e.rpe),$(".edit-exercise-weight").val(e.weight),$(".edit-exercise-percentage").val(e.percentage),$("#myworkouts-exercise-editModal").modal(),$(".myworkouts-exercise-editModal-accept-edit").on("click",function(){var t=e.id,a=$(".edit-exercise-reps").val(),s=$(".edit-exercise-sets").val(),r=$(".edit-exercise-rpe").val(),i=$(".edit-exercise-weight").val(),o=$(".edit-exercise-percentage").val();mlpObject.changeExercise({id:t,reps:a,sets:s,rpe:r,weight:i,percentage:o}),mlpObject.result.success===!0?($(".exercise-data"+e.exerciseid+" .sets").html(s),$(".exercise-data"+e.exerciseid+" .reps").html(a),$(".exercise-data"+e.exerciseid+" .weight").html(i),$(".exercise-data"+e.exerciseid+" .rpe").html(r),$(".exercise-data"+e.exerciseid+" .percentage").html(o),$(".bottom-right").notify({type:"info",message:{text:"Exercise details changed"}}).show(),$("body").removeClass("modal-open"),$("body").css("padding-right","0px")):$(".bottom-right").notify({type:"danger",message:{text:"Failed to change exercise"}}).show()}),$("#myworkouts-exercise-editModal").on("hidden.bs.modal",function(){$(".myworkouts-exercise-editModal-accept-edit").unbind()}),$("#myworkouts-exercise-editModal").modal()}),$(".myworkouts-workout-"+t+" .myworkouts-myexercises-"+e.exerciseid+" .myworkouts-myexercises-delete").on("click",function(){$(".exercisedata-id").html(e.exerciseid),$(".delete-id").html(e.id),$("#myworkouts-exercise-deleteModal").modal()})}function myWorkouts_appendHTML(e){var t=e.exercises;for(var a in t){var s=(t[a].exerciseid,t[a].name);t[a].name=s}var r=myWorkouts_generateHTML(e,t);$(".myworkouts-list").append(r),toggleCaret(".myworkouts-workout-"+e.id+" .myexercises-more",".myworkouts-workout-"+e.id+" .myexercises-more i","fa-caret-up","fa-caret-down"),$(".myworkouts-workout-"+e.id+" .myexercises-more").on("click",function(){$(".myworkouts-workout-"+e.id+" .exercise-section").slideToggle()}),$(".myworkouts-workout-"+e.id+" .myworkouts-edit").on("click",function(){$(".myworkouts-editModal-workoutid").html(e.id),$(".edit-workout-name").val(e.name),$("#myworkouts-editModal").modal()}),$(".myworkouts-workout-"+e.id+" .myworkouts-delete").on("click",function(){$(".delete-workout-id").html(e.id),$("#myworkouts-deleteModal").modal()}),$(".myworkouts-workout-"+e.id+" .myworkouts-addresults").on("click",function(){$(".addto-workout-id").html(e.id),$("#myworkouts-addtoModal").modal()}),$(".myworkouts-workout-"+e.id+" .myworkouts-workout-addexercise").on("click",function(){$(".accept-add").addClass("existing-workout"),myDiary_NewModelInitialise(),$(".extra-input").html('<input min="1" type="number" class="form-control sets" placeholder="Sets" step="1">'),$("#newModal").modal(),$(".existing-workout.accept-add").on("click",function(){var t=$(".modal-new-checkbox:checked");t.each(function(){var t=$(this),a=t.attr("class").split(" ")[1],s=a.split("-")[1],r=$("."+a+" .sets").val();""===r&&(r="1");var i=$("."+a+" .modal-new-exercise-name").html(),o=$("."+a+" .weight").val(),l=$("."+a+" .reps").val(),d=$("."+a+" .rpe").val(),n=$("."+a+" .percentage").val(),c={sets:r,exerciseid:s,name:i,workoutid:e.id};void 0!==o&&(c.weight=o),void 0!==l&&(c.reps=l),void 0!==d&&(c.rpe=d),void 0!==n&&(c.percentage=n),mlpObject.addExercise(c).result.success===!1?$(".bottom-right").notify({type:"danger",message:{text:"Failed to add "+c.name}}).show():(c.id=mlpObject.result.data.id,myWorkouts_ExistingWorkoutAddExercise(c))}),$(".bottom-right").notify({type:"info",message:{text:"Exercises added"}}).show(),$("body").removeClass("modal-open"),$("body").css("padding-right","0px")}),$("#newModal").on("hidden.bs.modal",function(){$(".existing-workout.accept-add").unbind(),$(".accept-add").removeClass("existing-workout")})});for(var i in t)myWorkouts_ExerciseClickRegisterFunction(t[i],e.id)}function myWorkouts_generateHTML(e,t){var a='<tr class="myworkouts-workout-'+e.id+'"><th><a href="javascript:void(0);" class="myexercises-more">'+e.name+' <i class="fa fa-caret-down"></i></a>';a+='<a href="javascript:void(0);" class="btn btn-danger btn-circle myworkouts-delete" style="float:right;" title="Delete workout"><i class="fa fa-remove"></i></a>',a+='<a href="javascript:void(0);" class="btn btn-primary btn-circle myworkouts-edit" style="float:right;margin-right: 2px;" title="Edit workout"><i class="fa fa-pencil-square-o"></i></a><a href="javascript:void(0);" class="btn btn-default btn-circle myworkouts-addresults" style="float:right;margin-right: 2px;" title="Add this workout to your diary"><i class="fa fa-plus"></i></a><div class="exercise-section" style="width:100%;display:none;">  <table class="table dnd-exerciselist" style="font-weight:initial;margin: 0 auto; width: 90%;"><tbody class="myexercises-list"> ';for(var s in t){var r=Math.floor(1e4*Math.random());a=a+'<tr class="myworkouts-myexercises-'+t[s].exerciseid+r+'" style="border-top: 0px;"><td scope="row" style="line-height: 30px; border-top: 0px; "><a href="javascript:void(0);" class="myworkouts-exercise'+t[s].exerciseid+r+'">'+t[s].name+' <i class="fa fa-caret-down"></i></a><a href="javascript:void(0);" class="btn btn-default btn-circle myworkouts-myexercises-delete" style="float:right;" title="Remove exercise from workout"><i class="fa fa-remove"></i></a><a href="javascript:void(0);" class="btn btn-default btn-circle myworkouts-myexercises-edit" style="float:right;" title="Edit details for this exercise"><i class="fa fa-pencil-square-o"></i></a><div class="exercise-data'+t[s].exerciseid+r+'" style="margin-left: 8px; display:none;"><div class="id" style="display:none;">'+t[s].id+'</div><strong>Sets:</strong><div class="sets" style="display:inline;">'+t[s].sets+'</div><br/><strong>Reps:</strong> <div class="reps" style="display:inline;">'+t[s].reps+'</div><br/><strong>Weight:</strong> <div class="weight" style="display:inline;">'+t[s].weight+'</div><br/><strong>RPE:</strong> <div class="rpe" style="display:inline;">'+t[s].rpe+'</div><br/><strong>%1RM:</strong> <div class="percentage" style="display:inline;">'+t[s].percentage+"</div> </div></td></tr>",t[s].exerciseid=t[s].exerciseid+r}return a+='</tbody></table> <div style="padding: 20px 0px;margin-left: 40%;"><a href="javascript:void(0);" class="btn btn-default myworkouts-workout-addexercise btn-circle-main" title="Add an exercise to this workout"><i class="fa fa-plus fa-2x" style="line-height: 1.9 !important;"></i></a> </div> </div></th> </tr>  '}function myWorkouts_ExistingWorkoutAddExercise(e){var t=Math.floor(1e4*Math.random()),a='<tr class="myworkouts-myexercises-'+e.exerciseid+t+'" style="border-top: 0px;"><td scope="row" style="line-height: 30px; border-top: 0px; "><a href="javascript:void(0);" class="myworkouts-exercise'+e.exerciseid+t+'">'+e.name+' <i class="fa fa-caret-down"></i></a><a href="javascript:void(0);" class="btn btn-default btn-circle myworkouts-myexercises-delete" style="float:right;" title="Remove exercise from workout"><i class="fa fa-remove"></i></a><a href="javascript:void(0);" class="btn btn-default btn-circle myworkouts-myexercises-edit" style="float:right;" title="Edit details for this exercise"><i class="fa fa-pencil-square-o"></i></a><div class="exercise-data'+e.exerciseid+t+'" style="margin-left: 8px; display:none;"><div class="id" style="display:none;">'+e.id+'</div><strong>Sets:</strong><div class="sets" style="display:inline;">'+e.sets+'</div><br/><strong>Reps:</strong> <div class="reps" style="display:inline;">'+e.reps+'</div><br/><strong>Weight:</strong> <div class="weight" style="display:inline;">'+e.weight+'</div><br/><strong>RPE:</strong> <div class="rpe" style="display:inline;">'+e.rpe+'</div><br/><strong>%1RM:</strong> <div class="percentage" style="display:inline;">'+e.percentage+"</div> </div></td></tr>";$(".myworkouts-workout-"+e.workoutid+" .myexercises-list").append(a),e.exerciseid=e.exerciseid+t,myWorkouts_ExerciseClickRegisterFunction(e,e.workoutid)}function myPrograms_Load(){$.get("myprograms.html",function(e){$(".load-into-container").html(e),$(".new-program-table").tableDnD(),myPrograms_MainClickRegisterFunction();var t=mlpObject.getPrograms({userid:$(".userid").html()}).result.data;mlpObject.result.success===!1&&console.log("Failed to get workouts. Maybe you don't have any!");for(var a in t)myPrograms_appendHTML(t[a]);"ontouchstart"in window||$("[title]").tooltip({delay:{show:500,hide:0}})})}function myPrograms_appendHTML(e){var t=e.workouts,a={};for(var s in t)a[t[s].day]=s;for(var r='<tr class="myprograms-program-'+e.id+'"><th><a href="javascript:void(0);" class="myprograms-more">'+e.name+' <i class="fa fa-caret-down"></i></a><a href="javascript:void(0);" class="btn btn-danger btn-circle myprograms-delete" style="float:right;margin-right: 2px;" title="Delete this program"><i class="fa fa-remove"></i></a><a href="javascript:void(0);" class="btn btn-primary btn-circle myprograms-edit" style="float:right;margin-right: 2px;" title="Edit this program"><i class="fa fa-pencil-square-o"></i></a><a href="javascript:void(0);" class="btn btn-default btn-circle myprograms-addresults" style="float:right;margin-right: 2px;" title="Add this program to your diary"><i class="fa fa-plus"></i></a><div class="myprograms-toggle" style="margin-top: 10px;margin-bottom:10px;width: 100%;display:none;"><table class="table" style="margin-bottom: 0px;width: 29%;display: inline-block;"><tbody class="myprograms-days">',i=1;i<=parseInt(e.duration);i++)r=r+'<tr><th style="border-top: 0px; height: 50px;vertical-align: middle;">Day '+i+": </th></tr>";r+='</tbody></table><table class="table myprograms-table" style="margin-bottom: 0px;width: 68%;display: inline-block;"><tbody class="myprograms myprograms-list"> ';for(var i=1;i<=parseInt(e.duration);i++)if(i in a){var o=t[a[i]].workoutid,l=t[a[i]];r=r+'<tr id="workoutprogram-id-'+t[a[i]].id+'" class="workout'+o+'" ><td style="border-top: 0px; height: 50px; vertical-align: middle;" class="myprograms-workout">'+l.name+'<span style="display:none;" class="myprogram-workoutid">'+o+'</span></td><td style="border-top: 0px;"><a href="javascript:void(0);" onclick="myPrograms_RemoveWorkout('+t[a[i]].id+')" class="btn btn-danger btn-circle myprograms-myworkouts-delete delete-'+t[a[i]].id+'" style="float: right;" title="Remove workout from program"><i class="fa fa-remove"></i></a></td></tr>'}else r=r+'<tr><td style="border-top: 0px; height: 50px;vertical-align: middle;"><a href="javascript:void(0);" onclick="myPrograms_AddWorkout('+e.id+", "+i+')" class="btn btn-primary myprograms-add-day-'+i+'"><i class="fa fa-plus"></i> Add Workout</a></td></tr>',$(".myprograms-program-"+e.id+" .myprograms-add-day-"+i).on("click",function(){});r+="</tbody></table></div></th></tr>",$(".myprograms-main.myprograms-list").append(r),toggleCaret(".myprograms-program-"+e.id+" .myprograms-more",".myprograms-program-"+e.id+" .myprograms-more i","fa-caret-up","fa-caret-down"),$(".myprograms-program-"+e.id+" .myprograms-more").on("click",function(){$(".myprograms-program-"+e.id+" .myprograms-toggle").slideToggle()}),$(".myprograms-program-"+e.id+" .myprograms-delete").on("click",function(){$("#myprograms-deleteModal .delete-program-id").html(e.id),$("#myprograms-deleteModal").modal()}),$(".myprograms-program-"+e.id+" .myprograms-edit").on("click",function(){$("#myprograms-editModal .myprograms-editModal-programid").html(e.id),$("#myprograms-editModal .edit-program-name").val(e.name),$("#myprograms-editModal .form-control.myprograms-edit-duration").val(e.duration),$("#myprograms-editModal .input-group-addon.myprograms-edit-duration").val("Days"),$("#myprograms-editModal").modal()}),$(".myprograms-program-"+e.id+" .myprograms-addresults").on("click",function(){$("#myprograms-addtoModal .addto-program-id").html(e.id),$("#myprograms-addtoModal").modal(),checkboxToRadio()})}function myPrograms_AddWorkout(e,t){$(".accept-add").addClass("existing-program"),myDiary_NewModelInitialiseWorkouts(!0),$(".existing-program.accept-add").on("click",function(){var a=$(".modal-new-checkbox:checked");a.each(function(){var a=$(this),s=a.attr("class").split(" ")[1],r=s.split("-")[1],i=a.parent().find(".modal-new-workout-name").html(),o={programid:e,workoutid:r,day:t};if(mlpObject.addWorkout(o),mlpObject.result.success===!1)$(".bottom-right").notify({type:"danger",message:{text:"Failed to add workout"}}).show();else{var l='<tr id="workoutprogram-id-'+mlpObject.result.data.id+'" class="workout'+r+'" ><td style="border-top: 0px; height: 50px; vertical-align: middle;" class="myprograms-workout">'+i+'<span style="display:none;" class="myprogram-workoutid">'+r+'</span></td><td style="border-top: 0px;"><a href="javascript:void(0);" onclick="myPrograms_RemoveWorkout('+mlpObject.result.data.id+')" class="btn btn-danger btn-circle myprograms-myworkouts-delete delete-'+mlpObject.result.data.id+'" style="float: right;" title="Remove workout from program"><i class="fa fa-remove"></i></a></td></tr>';$(".myprograms-program-"+e+" .myprograms-list tr").eq(t-1).replaceWith(l)}}),$(".bottom-right").notify({type:"info",message:{text:"Workout added"}}).show(),$("body").removeClass("modal-open"),$("body").css("padding-right","0px")}),$("#newModal").modal(),checkboxToRadio(),$("#newModal").on("hidden.bs.modal",function(){$(".existing-program.accept-add").unbind(),$(".accept-add").removeClass("existing-program")})}function myPrograms_RemoveWorkout(e){$("#myprograms-workout-deleteModal .delete-id").html(e),$("#myprograms-workout-deleteModal").modal()}function myPrograms_MainClickRegisterFunction(){$(".myprograms-addtoModal-accept").on("click",function(){var e=$(".addto-program-id").html(),t={programid:e,assigneddate:moment().format("YYYY-MM-DD")};mlpObject.addResults(t).result.success===!1?$(".bottom-right").notify({type:"info",message:{text:"Failed to add this program to your diary"}}).show():$(".bottom-right").notify({type:"info",message:{text:"Program added to your diary"}}).show()}),$(".myprograms-new-duration").change(function(){myPrograms_AdjustProgramsCalendarTable()}),$(".myprograms-create").on("click",function(e){e.preventDefault();var t=$(".myprograms-new-name").val();if(""===t)return void $(".bottom-right").notify({type:"danger",message:{text:"Enter a program name"}}).show();var a=$(".new-program.myprograms-list tr").length,s={name:t,duration:a};if(mlpObject.createProgram(s),mlpObject.result.success===!1)return void $(".bottom-right").notify({type:"danger",message:{text:"Failed to create program"}}).show();var r=mlpObject.result.data.id,i=1;$(".new-program.myprograms-list tr").each(function(){var e=$(this),t=e.find(".workoutid").html();if(t){var a=e.attr("id"),s={workoutid:t,programid:r,day:a,ordering:i};mlpObject.addWorkout(s),mlpObject.result.success===!1&&$(".bottom-right").notify({type:"danger",message:{text:"Error adding workout to program"}}).show(),i+=1}}),$(".bottom-right").notify({type:"info",message:{text:"Program created"}}).show(),load("myprograms",myPrograms_Load)}),$(".myprograms-workout-accept-delete").on("click",function(){var e=$("#myprograms-workout-deleteModal .delete-id").html(),t=$("#workoutprogram-id-"+e).parent().parent().parent().parent().parent().attr("class").split("-")[2];if(mlpObject.removeWorkout({id:e}),mlpObject.result.success===!1)return void $(".bottom-right").notify({type:"danger",message:{text:"Failed to remove workout"}}).show();var a=$(".myprograms-program-"+t+" .myprograms-list tr").index($("#workoutprogram-id-"+e))+1,s='<tr><td style="border-top: 0px; height: 50px;vertical-align: middle;"><a href="javascript:void(0);" onclick="myPrograms_AddWorkout('+t+", "+a+')" class="btn btn-primary myprograms-add-day-'+a+'"><i class="fa fa-plus"></i> Add Workout</a></td></tr>';$("#workoutprogram-id-"+e).replaceWith(s),$(".bottom-right").notify({type:"info",message:{text:"Workout removed"}}).show(),$("body").removeClass("modal-open"),$("body").css("padding-right","0px")}),$("#myprograms-deleteModal .myprograms-accept-delete").on("click",function(){return mlpObject.deleteProgram({id:$("#myprograms-deleteModal .delete-program-id").html()}),mlpObject.result.success===!1?void $(".bottom-right").notify({type:"danger",message:{text:"Failed to delete program"}}).show():($(".myprograms-program-"+$("#myprograms-deleteModal .delete-program-id").html()).remove(),$(".bottom-right").notify({type:"info",message:{text:"Program deleted"}}).show(),$("body").removeClass("modal-open"),void $("body").css("padding-right","0px"))}),$("#myprograms-editModal .myprograms-editModal-accept-edit").on("click",function(){var e=$("#myprograms-editModal .myprograms-editModal-programid").html(),t=$("#myprograms-editModal .edit-program-name").val(),a=$("#myprograms-editModal .form-control.myprograms-edit-duration").val(),s=$("#myprograms-editModal .input-group-addon.myprograms-edit-duration").val();if("Weeks"===s?a=7*a:"Months"===s&&(a=28*a),mlpObject.updateProgram({id:e,name:t,duration:a}),mlpObject.result.success===!1)return void $(".bottom-right").notify({type:"danger",message:{text:"Failed to update program"}}).show();$(".myprograms-program-"+e+" .myprograms-more").html(t+" "+$(".myprograms-program-"+e+" .myprograms-more i")[0].outerHTML);var r=$(".myprograms-program-"+e+" .myprograms-list tr").length;if(a>r)for(;a>r;)r+=1,$(".myprograms-program-"+e+" .myprograms-list").append('<tr><td style="border-top: 0px; height: 50px;vertical-align: middle;"><a href="javascript:void(0);" onclick="myPrograms_AddWorkout('+e+", "+r+')" class="btn btn-primary myprograms-add-day-'+r+'"><i class="fa fa-plus"></i> Add Workout</a></td></tr>'),$(".myprograms-program-"+e+" .myprograms-days").append('<tr><th style="border-top: 0px; height: 50px;vertical-align: middle;">Day '+r+": </th></tr>");else if(r>a)for(;r>a;)$(".myprograms-program-"+e+" .myprograms-list tr:last-child").remove(),$(".myprograms-program-"+e+" .myprograms-days tr:last-child").remove(),r-=1;$(".bottom-right").notify({type:"info",message:{text:"Program updated"}}).show(),$("body").removeClass("modal-open"),$("body").css("padding-right","0px")}),$(".myprograms-search.search-form").keypress(function(e){13===e.which&&$(".myprograms-search.search-btn").click()}),$(".myprograms-search.search-btn").on("click",function(){var e=$(".myprograms-search.search-form").val();if(mlpObject.getPrograms({name:e,userid:$(".userid").html()}),mlpObject.result.success===!0){$(".myprograms-main.myprograms-list").html("");var t=mlpObject.result.data;for(var a in t)myPrograms_appendHTML(t[a])}else $(".myprograms-main.myprograms-list").html('<span style="font-weight:bold;text-align:center;">No programs found</span>'),$(".bottom-right").notify({type:"danger",message:{text:"No programs found"}}).show()}),$("#newModal .search-btn-workouts").click(function(){setTimeout(function(){checkboxToRadio()},500)}),$(".search-workouts.pagination").click(function(){setTimeout(function(){checkboxToRadio()},500)})}function myPrograms_NewProgramRemoveWorkout(e){$("#"+e).html('<td style="border-top: 0px; height: 50px;vertical-align: middle;"><a href="javascript:void(0);" onclick="myPrograms_NewProgramModal('+e+')" class="btn btn-primary"><i class="fa fa-plus"></i> Add Workout</a></td>')}function myPrograms_NewProgramModal(e){$(".accept-add").addClass("new-program"),myDiary_NewModelInitialiseWorkouts(!0),$(".new-program.accept-add").on("click",function(){var t=$(".modal-new-checkbox:checked");t.each(function(){var t=$(this),a=t.attr("class").split(" ")[1],s=a.split("-")[1],r=t.parent().find(".modal-new-workout-name").html(),i={workoutid:s,name:r,day:e};myPrograms_NewProgramAddWorkout(i)}),$(".bottom-right").notify({type:"info",message:{text:"Workout added"}}).show()}),$("#newModal").modal(),checkboxToRadio(),$("#newModal").on("hidden.bs.modal",function(){$(".new-program.accept-add").unbind(),$(".accept-add").removeClass("new-program")})}function myPrograms_NewProgramAddWorkout(e){$("#"+e.day).html('<td style="border-top: 0px; height: 50px; vertical-align: middle;" class="newprogram-workout">'+e.name+'<span style="display:none;" class="workoutid">'+e.workoutid+'</span></td><td style="border-top: 0px;"><a href="javascript:void(0);" onclick = "myPrograms_NewProgramRemoveWorkout('+e.day+')" class="btn btn-danger btn-circle myworkouts-myexercises-delete" style="float: right;" title="Remove workout from program"><i class="fa fa-remove"></i></a></td>')}function myPrograms_AdjustProgramsCalendarTable(){var e=$(".new-program.myprograms-list tr").length,t=parseInt($("input.myprograms-new-duration").val());if("Weeks"===$("select.myprograms-new-duration").val()&&t?t=7*t:"Months"===$("select.myprograms-new-duration").val()&&(t=28*t),!(t>1e3||0>t)){if(e>t)for(;e>t;)$(".new-program.myprograms-list").children().eq(e-1).remove(),$(".days").children().eq(e-1).remove(),e-=1;else if(t>e)for(;t>e;)e+=1,$(".new-program.myprograms-list").append('<tr id="'+e+'"><td style="border-top: 0px; height: 50px;vertical-align: middle;"><a href="javascript:void(0);" onclick="myPrograms_NewProgramModal('+e+')" class="btn btn-primary"><i class="fa fa-plus"></i> Add Workout</a></td></tr>'),$(".days").append('<tr><th style="border-top: 0px; height: 50px;vertical-align: middle;">Day '+e+": </th></tr>");$(".new-program-table").tableDnD()}}function myDiary_MainClickRegisterFunction(){function e(e){document.getElementById("watchdisplay").innerHTML=e.toString()+"."+parseInt(e.getElapsed().milliseconds/100)}$(".sync-mfp").on("click",function(){var e=window.open("mfp.html","Login to MyFitnessPal","width=970, height=600");e.addEventListener("load",function(){$(e.document.body).find("#mfp-login").submit(function(t){t.preventDefault(),$(".show-sync").show();var a=$(e.document.body).find("#mfp-login #username").val(),s=$(e.document.body).find("#mfp-login #password").val();e.close(),setTimeout(function(){mlpObject.syncMfp({username:a,password:s,date:$(".selected-date-hidden").html()}),mlpObject.result.success===!0?$(".bottom-right").notify({type:"info",message:{text:"Diary synced with MyFitnessPal"}}).show():$(".bottom-right").notify({type:"danger",message:{text:"Failed to sync with MyFitnessPal"}}).show(),$(".show-sync").hide()},250)})})});var t=new Stopwatch(e,50);$(".start-watch").on("click",function(){t.start()}),$(".stop-watch").on("click",function(){t.stop()}),$(".reset-watch").on("click",function(){t.reset(),$("#watchdisplay").html("00:00:00.0")}),$(".calculate-max").on("click",function(e){e.preventDefault();var t=parseInt($(".reps-performed").val()),a=parseInt($(".weight-lifted").val()),s=0;s=10>t?Math.round(a/(1.0278-.0278*t))+$(".units").html():10===t?Math.round(a/.75)+$(".units").html():"Enter a rep range between 1 to 10",$(".calculated-max").html(s)
}),$(".generate-report").on("submit",function(e){return e.preventDefault(),mlpObject.getReport({reportstart:moment($(".start-date").val()).format("YYYY-MM-DD"),reportend:moment($(".end-date").val()).format("YYYY-MM-DD"),reporttype:"excel"}),mlpObject.result.success===!1?void $(".bottom-right").notify({type:"danger",message:{text:"No data found"}}).show():($(".generate-button").hide(),$(".download-button").attr("href","http://www.myliftingpal.net/api/"+mlpObject.result.data),void $(".download-button").fadeIn())}),$("#reportModal").on("hidden.bs.modal",function(){if("#"!==$(".download-button").attr("href")){var e=$(".download-button").attr("href").split("temp")[1];$(".download-button").attr("href","#"),$(".download-button").hide(),$(".generate-button").show(),mlpObject.removeReport({name:"temp"+e})}}),$(".btn-circle-main").on("click",function(){myDiary_NewModelInitialise(),$("#newModal").modal()}),$(".modal-tab-exercises").on("click",function(){$(".modal-tab-workouts").removeClass("active"),$(".modal-tab-programs").removeClass("active"),$(".modal-tab-exercises").addClass("active"),$(".modal-workouts").hide(),$(".modal-exercises").show(),$(".modal-programs").hide()}),$(".modal-tab-workouts").on("click",function(){$(".modal-tab-workouts").addClass("active"),$(".modal-tab-programs").removeClass("active"),$(".modal-tab-exercises").removeClass("active"),$(".modal-workouts").show(),$(".modal-exercises").hide(),$(".modal-programs").hide()}),$(".modal-tab-programs").on("click",function(){$(".modal-tab-workouts").removeClass("active"),$(".modal-tab-programs").addClass("active"),$(".modal-tab-exercises").removeClass("active"),$(".modal-workouts").hide(),$(".modal-exercises").hide(),$(".modal-programs").show()}),$(".accept-delete").on("click",function(){$("#deleteModal").modal("hide"),$("body").removeClass("modal-open"),$("body").css("padding-right","0px");var e=$(".delete-result-id").text();mlpObject.removeResults({id:e}),mlpObject.result.success===!0?("old-set"===$(".set-"+e).parent().attr("class")?($(".set-"+e).next().remove(),$(".set-"+e).remove()):load("mydiary",myDiary_Load,{date:moment($(".selected-date-hidden").text())}),$(".bottom-right").notify({type:"info",message:{text:"Set deleted"}}).show()):$(".bottom-right").notify({type:"danger",message:{text:"There was an error deleting set"}}).show()}),$(".accept-delete-exercise").on("click",function(){$("#deleteModal").modal("hide"),$("body").removeClass("modal-open"),$("body").css("padding-right","0px");var e=$(".delete-exercise-result-id").text(),t=$(".selected-date-hidden").text();mlpObject.removeResults({exerciseid:e,assigneddate:t}),mlpObject.result.success===!0?($(".exercise-"+e).remove(),$(".bottom-right").notify({type:"info",message:{text:"Exercise deleted"}}).show()):$(".bottom-right").notify({type:"danger",message:{text:"Failed to delete exercise"}}).show()}),$(".accept-edit").on("click",function(){$("#editModal").modal("hide"),$("body").removeClass("modal-open"),$("body").css("padding-right","0px");var e=$(".edit-result-id").text(),t=$(".edit-result-reps").val(),a=$(".edit-result-set").val(),s=$(".edit-result-rpe").val(),r=$(".edit-result-weight").val(),i=$(".edit-result-percentage").val();mlpObject.changeResults({id:e,reps:t,sets:a,rpe:s,weight:r,percentage:i}),mlpObject.result.success===!0?($(".set-"+e+" .reps").html(t),$(".set-"+e+" .set").html(a),$(".set-"+e+" .weight").html(r+$(".units").html()),$(".set-"+e+" .rpe").html(s),$(".set-"+e+" .percentage").html(i+"%"),$(".bottom-right").notify({type:"info",message:{text:"Set updated"}}).show()):$(".bottom-right").notify({message:{type:"warning",text:"There was an error upating the set"}}).show()}),$(".accept-add").on("click",function(){$("#newModal").modal("hide"),$("body").removeClass("modal-open"),$("body").css("padding-right","0px"),$(".modal-new-checkbox:checked").each(function(){var e=$(this),t=!1;selectedPaginatedItems.each(function(){return e.attr("class")===$(this).attr("class")?(t=!0,!1):void 0}),t===!1&&selectedPaginatedItems.push(this)});var e=selectedPaginatedItems;e.each(function(){var e=$(this),t=e.attr("class").split(" ")[1];if("recentprogram"===t.split("-")[0]||"searchprogram"===t.split("-")[0]){var a=t.split("-")[1];mlpObject.addResults({programid:a,assigneddate:$(".selected-date-hidden").text()}).result.success===!1?$(".bottom-right").notify({type:"info",message:{text:"Failed to add program"}}).show():$(".bottom-right").notify({type:"info",message:{text:"Program added"}}).show()}else if("recentworkout"===t.split("-")[0]||"searchworkout"===t.split("-")[0]){var s=t.split("-")[1];mlpObject.addResults({workoutid:s,assigneddate:$(".selected-date-hidden").text()}).result.success===!1?$(".bottom-right").notify({type:"info",message:{text:"Failed to add workout"}}).show():$(".bottom-right").notify({type:"info",message:{text:"Workout added"}}).show()}else{var r=t.split("-")[1],i=$("."+t+" .modal-new-exercise-name").html().split(" ").join(""),o=parseInt($("."+i+" .added .set").html())+1;(1>o||isNaN(o))&&(o=1);var l=$("."+t+" .weight").val(),d=$("."+t+" .reps").val(),n=$("."+t+" .rpe").val(),c=$("."+t+" .percentage").val(),m={sets:o,exerciseid:r,assigneddate:$(".selected-date-hidden").text()};void 0!==l&&(m.weight=l),void 0!==d&&(m.reps=d),void 0!==n&&(m.rpe=n),void 0!==c&&(m.percentage=c),mlpObject.addResults(m).result.success===!1?$(".bottom-right").notify({type:"info",message:{text:"Failed to add an exercise"}}).show():$(".bottom-right").notify({type:"info",message:{text:"Exercise added"}}).show()}}),$(".modal-new-checkbox").prop("checked",!1),selectedPaginatedItems=$(".modal-new-checkbox:checked"),load("mydiary",myDiary_Load,{date:moment($(".selected-date-hidden").text())})}),$(".change-date-left").on("click",function(){load("mydiary",myDiary_Load,{date:moment($(".selected-date-hidden").text()).subtract(1,"days").calendar("YYYY-MM-DD")})}),$(".change-date-right").on("click",function(){load("mydiary",myDiary_Load,{date:moment($(".selected-date-hidden").text()).add(1,"days").calendar("YYYY-MM-DD")})}),$(".change-date-input").on("change",function(){$(".change-date-input").unbind(),load("mydiary",myDiary_Load,{date:moment($(".change-date-input").val())})})}function myDiary_Load(e){var t=moment(e.date).format("YYYY-MM-DD");$.get("mydiary.html",function(e){$(".load-into-container").html(e),$("[data-toggle='tooltip']").tooltip(),$(".selected-date").html(moment(t).format("dddd, MMMM Do, YYYY")),$(".selected-date-hidden").html(t),$(".input-group.date").datepicker({orientation:"top left",todayHighlight:!0,autoclose:!0}),$(".load-into-container .dropdown").unbind(),$(".load-into-container .dropdown").on("show.bs.dropdown",function(){$($(".load-into-container .dropdown i")[1]).addClass("fa-caret-up"),$($(".load-into-container .dropdown i")[1]).removeClass("fa-caret-down"),$(this).find(".dropdown-menu").first().stop(!0,!0).slideDown()}),$(".load-into-container .dropdown").on("hide.bs.dropdown",function(){$($(".load-into-container .dropdown i")[1]).removeClass("fa-caret-up"),$($(".load-into-container .dropdown i")[1]).addClass("fa-caret-down"),$(this).find(".dropdown-menu").first().stop(!0,!0).slideUp()}),myDiary_MainClickRegisterFunction();var a=mlpObject.selectResults({assigneddate:t}).result;if(a.success===!0){var s=[];for(var r in a.data){var i=a.data[r],o=a.data[r].name,l=a.data[r].records,d=["Best reps with "+l.amrap.weight+$(".units").html()+": "+l.amrap.reps+"@rpe"+l.amrap.rpe,l.overall.rep+"RM: "+l.overall.max+$(".units").html(),"Best volume for "+i.reps+" rep sets: "+l.backoffs.best+$(".units").html(),"Last time you did "+l.history.sets+"x"+l.history.reps+" using "+l.history.weight+$(".units").html()];o in s?s[o].push({id:i.id,exercise:o,exerciseid:i.exerciseid,reps:i.reps,set:i.sets,weight:i.weight,rpe:i.rpe,onerm:i.percentage,notes:i.notes,records:d}):s[o]=[{id:i.id,exercise:o,exerciseid:i.exerciseid,reps:i.reps,set:i.sets,weight:i.weight,rpe:i.rpe,onerm:i.percentage,notes:i.notes,records:d}]}}else $(".my-exercises").html('<span style="display: block;text-align:center;margin-top:-10px;">Rest day is it?</span>');for(var n in s)myDiary_appendHTML(s[n].sort(function(e,t){return e.set>t.set?1:e.set<t.set?-1:0}));"ontouchstart"in window||$("[title]").tooltip({delay:{show:500,hide:0}})})}function myDiary_ExerciseClickRegisterFunction(e){var t=$(e);$(e).hasClass("fa")&&(t=$(e).parent());var a=t.closest(".added-exercise").attr("class").split(" ")[1];if(t.hasClass("added"))$("."+a+" .view-added").slideToggle();else if(t.hasClass("log"))$("."+a+" .view-log").slideToggle();else if(t.hasClass("old"))$("."+a+" .view-old").slideToggle();else if(t.hasClass("exercise-delete"))$(".delete-exercise-result-id").html($("."+a+" .exerciseid").text()),$("#deleteExerciseModal").modal();else if(t.hasClass("exercise-settings"))t.closest(".old-set").hasClass("old-set")?t.closest(".old-set").find(".view-exercise-settings").slideToggle():$("."+a+" > .view-exercise-settings").slideToggle();else if(t.hasClass("save-form")){var s=$("."+a+" .exerciseid").text(),r=$(".selected-date-hidden").text(),i=$("."+a+" .details.reps input").val(),o=$("."+a+" .details.set input").val(),l=$("."+a+" .details.rpe input").val(),d=$("."+a+" .details.weight input").val(),n=$("."+a+" .details.percentage input").val();mlpObject.addResults({exerciseid:s,reps:i,sets:o,rpe:l,weight:d,percentage:n,assigneddate:r}),mlpObject.result.success===!0?($("."+a+" .view-added").slideToggle(),load("mydiary",myDiary_Load,{date:moment(r)}),$(".bottom-right").notify({type:"info",message:{text:"New set added"}}).show()):$(".bottom-right").notify({type:"danger",message:{text:"Failed to add set"}}).show()}else if(t.hasClass("note")){var c=$("."+a+" .id :first").text(),m=$("."+a+" .note :first").val();mlpObject.changeResults({id:c,notes:m}),mlpObject.result.success===!1&&console.log("There was an error saving notes for: "+a+" id number: "+c)}else if(t.hasClass("edit")){var c,i,o,d,n,s=$("."+a+" .exerciseid").text(),r=$(".selected-date-hidden").text();t.closest(".old-set").hasClass("old-set")?(c=t.closest(".old-set").find(".details.id").text(),i=t.closest(".old-set").find(".details.reps").text(),o=t.closest(".old-set").find(".details.set").text(),l=t.closest(".old-set").find(".details.rpe").text(),d=t.closest(".old-set").find(".details.weight").text(),n=t.closest(".old-set").find(".details.percentage").text()):(c=$("."+a+" .added .id :first").text(),i=$("."+a+" .added .reps :first").text(),o=$("."+a+" .added .set :first").text(),l=$("."+a+" .added .rpe :first").text(),d=$("."+a+" .added .weight :first").text(),n=$("."+a+" .added .percentage :first").text()),$(".edit-result-id").html(c),$(".edit-result-reps").val(i),$(".edit-result-set").val(o),$(".edit-result-rpe").val(l),$(".edit-result-weight").val(d.replace($(".units").html(),"")),$(".edit-result-percentage").val(n.replace("%","")),$("#editModal").modal()}else if(t.hasClass("delete")){var c=0;c=t.closest(".old-set").hasClass("old-set")?t.closest(".old-set").find(".id").text():$("."+a+" .id :first").text(),$(".delete-result-id").html(c),$("#deleteModal").modal()}else if(t.hasClass("view-notes")){var c=0;c=t.closest(".old-set").hasClass("old-set")?t.closest(".old-set").find(".id").text():$("."+a+" .id :first").text();var p=mlpObject.selectResults({id:c}).result;if(p.success===!0){var u=p.data[0].notes;$(".modal-notes-contents").html(u),$("#notesModal").modal()}else $(".bottom-right").notify({type:"danger",message:{text:"Note cannot be loaded"}}).show()}else t.hasClass("share-set")}function myDiary_NewModelInitialise(){myDiary_NewModelInitialiseExercises(),myDiary_NewModelInitialiseWorkouts(!1),myDiary_NewModelInitialisePrograms()}function myDiary_NewModelInitialisePrograms(){if(mlpObject.selectResults({limit:35,type:"programs"}).result.success===!0){var e=mlpObject.result.data;myDiary_NewModelAddRecentPrograms(e,1)}else $(".modal-new-recent-items-programs").html("You have not added any programs! Use the search and find some, or <a href=\"javascript:void(0);\" onclick=\"$('body').removeClass('modal-open');$('body').css('padding-right','0px');$('.loader').show();myPrograms_Load();\">create one</a>.");$(".search-form-programs").keypress(function(e){13===e.which&&$(".search-programs .search-btn-programs").click()}),$(".search-programs .search-btn-programs").click(function(){var e=$(".search-programs .search-form-programs").val();if($(".modal-new-search-term-program").html(e),mlpObject.getPrograms({name:e}).result.success===!0){var t=mlpObject.result.data;$(".search-programs").append('<div class="total-programs" style="display:none;">'+Object.keys(mlpObject.result.data).length+"</div>"),myDiary_NewModelAddSearchPrograms(t,1)}else $(".modal-search-results-programs").html("No results for this program. <a href=\"javascript:void(0);\" onclick=\"$('body').removeClass('modal-open');$('body').css('padding-right','0px');$('.loader').show();load('myprograms',myPrograms_Load);\">Create it?</a>")}),$("#newModal").on("hidden.bs.modal",function(){$(".search-form-programs").unbind(),$(".search-programs .search-btn-programs").unbind()})}function myDiary_NewModelAddSearchPrograms(e,t){$(".modal-new-checkbox:checked").each(function(){var e=$(this),t=!1;selectedPaginatedItems.each(function(){return e.attr("class")===$(this).attr("class")?(t=!0,!1):void 0}),t===!1&&selectedPaginatedItems.push(this)}),$(".search-programs .current-page-programs").html(t);var a="";for(var s in e){var r=e[s];if(s>=6*t)break;if(s>=6*t-6){a=a+'<div class="row modal-new-search-item-programs searchprogram-'+r.id+'" style="padding: 5px 0;"><input type="checkbox" value="" class="modal-new-checkbox searchprogram-'+r.id+'"> <div class="modal-new-program-name" style="display: inline;">'+r.name+'</div><div class="modal-new-input" style="margin-top: 5px; margin-right:40px;"><a href="javascript:void(0);" class=" modal-new-workouts-link" onclick="javascript:$(\'.modal-new-search-item-programs.searchprogram-'+r.id+' .modal-new-workouts\').slideToggle();">Workouts <i class="fa fa-caret-down"></i></a><div class="modal-new-workouts" style="display:none;width: 150%;">';var i="";for(var o in r.workouts){var l=r.workouts[o];i!==l.workoutname&&(""!==i&&(a+="</span><br/>"),a=a+'<span class="program-workout'+l.workoutid+'"><em>Day '+l.day+": </em><strong>"+l.workoutname+"</strong><br/>",i=l.workoutname),a=a+'<span class="workout-exercise'+l.exerciseid+'">'+l.name+'<br/><div class="exercise-details" style="display:none;"><div class="workoutid">'+l.workoutid+'</div><div class="id">'+l.exerciseid+'</div><div class="reps">'+l.reps+'</div><div class="sets">'+l.sets+'</div><div class="weight">'+l.weight+'</div><div class="rpe">'+l.rpe+'</div><div class="percentage">'+l.percentage+'</div><div class="day">'+l.day+"</div></div></span>"}a+="</div></div></div>"}}$(".modal-search-results-programs").html(a);var d=Math.ceil(Object.keys(e).length/6);if(0!==d){a="",a+='<li><a href="javascript:void(0);"  onclick="javascript:myDiary_NewModelChangeSearchPagePrograms(0)" ',1==t&&(a+="disabled"),a+=' aria-label="Previous"> <span aria-hidden="true">&laquo;</span></a></li>',s=4*Math.floor((t-1)/4)+1,1>s&&(s=1);for(var n=s+4;d>=s&&n>s;)a+='<li><a href="javascript:void(0);" ',s==t&&(a+='style="background-color:#eee"'),a=a+' onclick="javascript:myDiary_NewModelChangeSearchPagePrograms('+s+')">'+s+"</a></li>",s+=1;a+='<li><a href="javascript:void(0);" onclick="javascript:myDiary_NewModelChangeSearchPagePrograms(6)"  ',t==d&&(a+="disabled"),a+=' aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>',$(".pagination.search-programs").html(a),selectedPaginatedItems.each(function(){var e=$(this);$(".modal-new-checkbox").each(function(){e.attr("class")===$(this).attr("class")&&$(this).prop("checked",!0)})}),$(".modal-new-checkbox").unbind(),$(".modal-new-checkbox").on("change",function(){if(!$(this).is(":checked")){var e=$(this);selectedPaginatedItems.each(function(t){e.attr("class")===$(this).attr("class")&&selectedPaginatedItems.splice(t,1)})}}),1===d&&$(".pagination.search-programs").css({"padding-left":"92px"}),2===d&&$(".pagination.search-programs").css({"padding-left":"88px"}),3===d&&$(".pagination.search-programs").css({"padding-left":"74px"}),4===d&&$(".pagination.search-programs").css({"padding-left":"44px"})}}function myDiary_NewModelChangeSearchPagePrograms(e){if(e>=6){var t=parseInt($(".search-programs .current-page-programs").html());if(parseInt($(".total-programs").html())<=6*t)return;e=parseInt($(".search-programs .current-page-programs").html())+1}else if(0>=e&&(e=parseInt($(".search-programs .current-page-programs").html())-1,1>e))return;var a=$(".modal-new-search-term-program").html();if(mlpObject.getPrograms({name:a}).result.success===!0){var s=mlpObject.result.data;myDiary_NewModelAddSearchPrograms(s,e)}}function myDiary_NewModelAddRecentPrograms(e,t){$(".modal-new-checkbox:checked").each(function(){var e=$(this),t=!1;selectedPaginatedItems.each(function(){return e.attr("class")===$(this).attr("class")?(t=!0,!1):void 0}),t===!1&&selectedPaginatedItems.push(this)}),$(".recent-programs .current-page-programs").html(t);var a="";for(var s in e){var r=e[s];if(s>=7*t)break;if(s>=7*t-7){a=a+'<div class="row modal-new-recent-item-programs recentprogram-'+r.programid+'" style="padding: 5px 0;"><input type="checkbox" value="" class="modal-new-checkbox recentprogram-'+r.programid+'"> <div class="modal-new-program-name" style="display: inline;">'+r.name+'</div><div class="modal-new-input" style="margin-top: 5px; margin-right:40px;"><a href="javascript:void(0);" class=" modal-new-workouts-link" onclick="javascript:$(\'.modal-new-recent-item-programs.recentprogram-'+r.programid+' .modal-new-workouts\').slideToggle();">Workouts <i class="fa fa-caret-down"></i></a><div class="modal-new-workouts" style="display:none;width: 150%;">';var i="";for(var o in r.workouts){var l=r.workouts[o];i!==l.workoutname&&(""!==i&&(a+="</span><br/>"),a=a+'<span class="program-workout'+l.workoutid+'"><em>Day '+l.day+": </em><strong>"+l.workoutname+"</strong><br/>",i=l.workoutname),a=a+'<span class="workout-exercise'+l.exerciseid+'">'+l.name+'<br/><div class="exercise-details" style="display:none;"><div class="workoutid">'+l.workoutid+'</div><div class="id">'+l.exerciseid+'</div><div class="reps">'+l.reps+'</div><div class="sets">'+l.sets+'</div><div class="weight">'+l.weight+'</div><div class="rpe">'+l.rpe+'</div><div class="percentage">'+l.percentage+'</div><div class="day">'+l.day+"</div></div></span>"}a+="</div></div></div>"}}$(".modal-new-recent-items-programs").html(a);var d=Math.ceil(Object.keys(e).length/7);if(0!==d){for(a="",a+='<li><a href="javascript:void(0);"  onclick="javascript:myDiary_NewModelChangeRecentPagePrograms(0)" ',1==t&&(a+="disabled"),a+=' aria-label="Previous"> <span aria-hidden="true">&laquo;</span></a></li>',s=1;d>=s&&5>s;)a+='<li><a href="javascript:void(0);" ',s==t&&(a+='style="background-color:#eee"'),a=a+' onclick="javascript:myDiary_NewModelChangeRecentPagePrograms('+s+')">'+s+"</a></li>",s+=1;a+='<li><a href="javascript:void(0);" onclick="javascript:myDiary_NewModelChangeRecentPagePrograms(6)"  ',t==d&&(a+="disabled"),a+=' aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>',$(".pagination.recent-programs").html(a),selectedPaginatedItems.each(function(){var e=$(this);$(".modal-new-checkbox").each(function(){e.attr("class")===$(this).attr("class")&&$(this).prop("checked",!0)})}),$(".modal-new-checkbox").unbind(),$(".modal-new-checkbox").on("change",function(){if(!$(this).is(":checked")){var e=$(this);selectedPaginatedItems.each(function(t){e.attr("class")===$(this).attr("class")&&selectedPaginatedItems.splice(t,1)})}}),1===d&&$(".pagination.recent-programs").css({"padding-left":"92px"}),2===d&&$(".pagination.recent-programs").css({"padding-left":"88px"}),3===d&&$(".pagination.recent-programs").css({"padding-left":"74px"}),4===d&&$(".pagination.recent-programs").css({"padding-left":"44px"})}}function myDiary_NewModelChangeRecentPagePrograms(e){if(e>=6){if(e=parseInt($(".recent-programs .current-page-programs").html())+1,e>$(".pagination.recent-programs").children().length-2)return}else if(0>=e&&(e=parseInt($(".recent-programs .current-page-programs").html())-1,1>e))return;if(mlpObject.selectResults({limit:35,type:"programs"}).result.success===!0){var t=mlpObject.result.data;myDiary_NewModelAddRecentPrograms(t,e)}}function myDiary_NewModelInitialiseWorkouts(e){if(mlpObject.selectResults({limit:35,type:"workouts"}).result.success===!0){var t=mlpObject.result.data;myDiary_NewModelAddRecentWorkouts(t,1,e)}else $(".modal-new-recent-items-workouts").html("You have not added any workouts! Use the search and find some, or <a href=\"javascript:void(0);\" onclick=\"$('body').removeClass('modal-open');$('body').css('padding-right','0px');$('.loader').show();myWorkouts_Load();\">create one</a>.");$(".search-form-workouts").keypress(function(e){13===e.which&&$(".search-workouts .search-btn-workouts").click()}),$(".search-workouts .search-btn-workouts").click(function(){var t=$(".search-workouts .search-form-workouts").val();if($(".modal-new-search-term-workout").html(t),mlpObject.getWorkouts({name:t}).result.success===!0){var a=mlpObject.result.data;$(".search-workouts").append('<div class="total-workouts" style="display:none;">'+Object.keys(mlpObject.result.data).length+"</div>"),myDiary_NewModelAddSearchWorkouts(a,1,e)}else $(".modal-search-results-workouts").html("No results for this workout. <a href=\"javascript:void(0);\" onclick=\"$('body').removeClass('modal-open');$('body').css('padding-right','0px');$('.loader').show();load('myworkouts',myWorkouts_Load);\">Create it?</a>")}),$("#newModal").on("hidden.bs.modal",function(){$(".search-form-workouts").unbind(),$(".search-workouts .search-btn-workouts").unbind()})}function myDiary_NewModelAddSearchWorkouts(e,t,a){$(".modal-new-checkbox:checked").each(function(){var e=$(this),t=!1;selectedPaginatedItems.each(function(){return e.attr("class")===$(this).attr("class")?(t=!0,!1):void 0}),t===!1&&selectedPaginatedItems.push(this)}),$(".search-workouts .current-page-workouts").html(t);var s="";for(var r in e){var i=e[r];if(r>=6*t)break;if(r>=6*t-6){s=s+'<div class="row modal-new-search-item-workouts searchworkout-'+i.id+'" style="padding: 5px 0;"><input type="checkbox" value="" class="modal-new-checkbox searchworkout-'+i.id+'"> <div class="modal-new-workout-name" style="display: inline;">'+i.name+'</div><div class="modal-new-input" style="margin-top: 5px; margin-right:40px;"><a href="javascript:void(0);" class=" modal-new-exercises-link" onclick="javascript:$(\'.modal-new-search-item-workouts.searchworkout-'+i.id+' .modal-new-exercises\').slideToggle();">Exercises <i class="fa fa-caret-down"></i></a><div class="modal-new-exercises" style="display:none;width: 150%;">';for(var o in i.exercises){var l=i.exercises[o];s=s+'<span class="workout-exercise'+l.exerciseid+'">'+l.name+'<br/><div class="exercise-details" style="display:none;"><div class="id">'+l.exerciseid+'</div><div class="reps">'+l.reps+'</div><div class="sets">'+l.sets+'</div><div class="weight">'+l.weight+'</div><div class="rpe">'+l.rpe+'</div><div class="percentage">'+l.percentage+"</div></div></span>"}s+="</div></div></div>"}}$(".modal-search-results-workouts").html(s),a&&checkboxToRadio();var d=Math.ceil(Object.keys(e).length/6);if(0!==d){s="",s=s+'<li><a href="javascript:void(0);"  onclick="javascript:myDiary_NewModelChangeSearchPageWorkouts(0, '+a+')" ',1==t&&(s+="disabled"),s+=' aria-label="Previous"> <span aria-hidden="true">&laquo;</span></a></li>',r=4*Math.floor((t-1)/4)+1,1>r&&(r=1);for(var n=r+4;d>=r&&n>r;)s+='<li><a href="javascript:void(0);" ',r==t&&(s+='style="background-color:#eee"'),s=s+' onclick="javascript:myDiary_NewModelChangeSearchPageWorkouts('+r+", "+a+')">'+r+"</a></li>",r+=1;s=s+'<li><a href="javascript:void(0);" onclick="javascript:myDiary_NewModelChangeSearchPageWorkouts(6, '+a+')" ',t==d&&(s+="disabled"),s+=' aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>',$(".pagination.search-workouts").html(s),selectedPaginatedItems.each(function(){var e=$(this);$(".modal-new-checkbox").each(function(){e.attr("class")===$(this).attr("class")&&$(this).prop("checked",!0)})}),$(".modal-new-checkbox").unbind(),$(".modal-new-checkbox").on("change",function(){if(!$(this).is(":checked")){var e=$(this);selectedPaginatedItems.each(function(t){e.attr("class")===$(this).attr("class")&&selectedPaginatedItems.splice(t,1)})}}),1===d&&$(".pagination.search-workouts").css({"padding-left":"92px"}),2===d&&$(".pagination.search-workouts").css({"padding-left":"88px"}),3===d&&$(".pagination.search-workouts").css({"padding-left":"74px"}),4===d&&$(".pagination.search-workouts").css({"padding-left":"44px"})}}function myDiary_NewModelChangeSearchPageWorkouts(e,t){if(e>=6){var a=parseInt($(".search-workouts .current-page-workouts").html());if(parseInt($(".total-workouts").html())<=6*a)return;e=parseInt($(".search-workouts .current-page-workouts").html())+1}else if(0>=e&&(e=parseInt($(".search-workouts .current-page-workouts").html())-1,1>e))return;var s=$(".modal-new-search-term-workout").html();if(mlpObject.getWorkouts({name:s}).result.success===!0){var r=mlpObject.result.data;myDiary_NewModelAddSearchWorkouts(r,e,t)}}function myDiary_NewModelAddRecentWorkouts(e,t,a){$(".modal-new-checkbox:checked").each(function(){var e=$(this),t=!1;selectedPaginatedItems.each(function(){return e.attr("class")===$(this).attr("class")?(t=!0,!1):void 0}),t===!1&&selectedPaginatedItems.push(this)}),$(".recent-workouts .current-page-workouts").html(t);var s="";for(var r in e){var i=e[r];if(r>=7*t)break;if(r>=7*t-7){s=s+'<div class="row modal-new-recent-item-workouts recentworkout-'+i.workoutid+'" style="padding: 5px 0;"><input type="checkbox" value="" class="modal-new-checkbox recentworkout-'+i.workoutid+'"> <div class="modal-new-workout-name" style="display: inline;">'+i.name+'</div><div class="modal-new-input" style="margin-top: 5px; margin-right:40px;"><a href="javascript:void(0);" class=" modal-new-exercises-link" onclick="javascript:$(\'.modal-new-recent-item-workouts.recentworkout-'+i.workoutid+' .modal-new-exercises\').slideToggle();">Exercises <i class="fa fa-caret-down"></i></a><div class="modal-new-exercises" style="display:none;width: 150%;">';for(var o in i.exercises){var l=i.exercises[o];s=s+'<span class="workout-exercise'+l.exerciseid+'">'+l.name+'<br/><div class="exercise-details" style="display:none;"><div class="id">'+l.exerciseid+'</div><div class="reps">'+l.reps+'</div><div class="sets">'+l.sets+'</div><div class="weight">'+l.weight+'</div><div class="rpe">'+l.rpe+'</div><div class="percentage">'+l.percentage+"</div></div></span>"}s+="</div></div></div>"}}$(".modal-new-recent-items-workouts").html(s),a&&checkboxToRadio();var d=Math.ceil(Object.keys(e).length/6);if(0!==d){for(s="",s=s+'<li><a href="javascript:void(0);"  onclick="javascript:myDiary_NewModelChangeRecentPageWorkouts(0, '+a+')" ',1==t&&(s+="disabled"),s+=' aria-label="Previous"> <span aria-hidden="true">&laquo;</span></a></li>',r=1;d>=r&&5>r;)s+='<li><a href="javascript:void(0);" ',r==t&&(s+='style="background-color:#eee"'),s=s+' onclick="javascript:myDiary_NewModelChangeRecentPageWorkouts('+r+", "+a+')">'+r+"</a></li>",r+=1;s=s+'<li><a href="javascript:void(0);" onclick="javascript:myDiary_NewModelChangeRecentPageWorkouts(6, '+a+')" ',t==d&&(s+="disabled"),s+=' aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>',$(".pagination.recent-workouts").html(s),selectedPaginatedItems.each(function(){var e=$(this);$(".modal-new-checkbox").each(function(){e.attr("class")===$(this).attr("class")&&$(this).prop("checked",!0)})}),$(".modal-new-checkbox").unbind(),$(".modal-new-checkbox").on("change",function(){if(!$(this).is(":checked")){var e=$(this);selectedPaginatedItems.each(function(t){e.attr("class")===$(this).attr("class")&&selectedPaginatedItems.splice(t,1)})}}),1===d&&$(".pagination.recent-workouts").css({"padding-left":"92px"}),2===d&&$(".pagination.recent-workouts").css({"padding-left":"88px"}),3===d&&$(".pagination.recent-workouts").css({"padding-left":"74px"}),4===d&&$(".pagination.recent-workouts").css({"padding-left":"44px"})}}function myDiary_NewModelChangeRecentPageWorkouts(e){if(e>=6){if(e=parseInt($(".recent-workouts .current-page-workouts").html())+1,e>$(".pagination.recent-workouts").children().length-2)return}else if(0>=e&&(e=parseInt($(".recent-workouts .current-page-workouts").html())-1,1>e))return;if(mlpObject.selectResults({limit:35,type:"workouts"}).result.success===!0){var t=mlpObject.result.data;myDiary_NewModelAddRecentWorkouts(t,e)}}function myDiary_NewModelInitialiseExercises(){var e={},t={},a=mlpObject.selectResults({limit:35,type:"exercises"}).result;if(a.success===!0){var s;for(s in a.data)e[a.data[s].exerciseid]=a.data[s].name,t[a.data[s].exerciseid]=a.data[s].details;myDiary_NewModelAddRecent(a.data,t,1)}else $(".modal-new-recent-items").html("You have not added any exercises! Use the search and find some, or <a href=\"javascript:void(0);\" onclick=\"$('body').removeClass('modal-open');$('body').css('padding-right','0px');$('.loader').show();myExercises_Load();\">create one</a>.");$(".search-form").keypress(function(e){13===e.which&&$(".search-exercises .search-btn").click()}),$(".search-exercises .search-btn").click(function(){var e=$(".search-exercises .search-form").val();$(".modal-new-search-term").html(e);var t={},a=mlpObject.getExercises({name:e}).result;if(a.success===!0){var s;for(s in a.data)t[a.data[s].id]=a.data[s].name;$(".search-exercises").append('<div class="total-exercises" style="display:none;">'+Object.keys(mlpObject.result.data).length+"</div>")}myDiary_NewModelAddSearch(t,1)}),$("#newModal").on("hidden.bs.modal",function(){$(".modal-new-checkbox").prop("checked",!1),selectedPaginatedItems=$(".modal-new-checkbox:checked"),$(".saved-exercise-data").html(""),$(".search-form").unbind(),$(".search-exercises .search-btn").unbind()})}function myDiary_NewModelAddRecent(e,t,a){$(".saved-exercise-data").length<1&&$(".modal-content").append("<div class='saved-exercise-data' style='display:none;'></div>"),$(".modal-new-checkbox:checked").each(function(){var e=$(this),t=!1,a=".modal-new-recent-item."+e.attr("class").split(" ")[1];selectedPaginatedItems.each(function(){return e.attr("class")===$(this).attr("class")?($(".saved-exercise-data "+a+" .reps").val($(".modal-new-recent-items "+a+" .reps").val()),$(".saved-exercise-data "+a+" .weight").val($(".modal-new-recent-items "+a+" .weight").val()),$(".saved-exercise-data "+a+" .rpe").val($(".modal-new-recent-items "+a+" .rpe").val()),$(".saved-exercise-data "+a+" .percentage").val($(".modal-new-recent-items "+a+" .percentage").val()),void 0!==$(".modal-new-recent-items "+a+" .sets").val()&&$(".saved-exercise-data "+a+" .sets").val($(".modal-new-recent-items "+a+" .sets").val()),void 0!==$(".modal-new-recent-items "+a+" .onerm").val()&&($(".saved-exercise-data "+a+" .onerm").val($(".modal-new-recent-items "+a+" .onerm").val()),$(".saved-exercise-data "+a+" .type").val($(".modal-new-recent-items "+a+" .type").val())),t=!0,!1):void 0}),t===!1&&(selectedPaginatedItems.push(this),e.remove(),$(".saved-exercise-data").append('<div class="'+a.split(".").join(" ")+'">'+$(a).html()+"</div>"),$(".saved-exercise-data "+a+" .reps").val($(".modal-new-recent-items "+a+" .reps").val()),$(".saved-exercise-data "+a+" .weight").val($(".modal-new-recent-items "+a+" .weight").val()),$(".saved-exercise-data "+a+" .rpe").val($(".modal-new-recent-items "+a+" .rpe").val()),$(".saved-exercise-data "+a+" .percentage").val($(".modal-new-recent-items "+a+" .percentage").val()),void 0!==$(".modal-new-recent-items "+a+" .sets").val()&&$(".saved-exercise-data "+a+" .sets").val($(".modal-new-recent-items "+a+" .sets").val()),void 0!==$(".modal-new-recent-items "+a+" .onerm").val()&&($(".saved-exercise-data "+a+" .onerm").val($(".modal-new-recent-items "+a+" .onerm").val()),$(".saved-exercise-data "+a+" .type").val($(".modal-new-recent-items "+a+" .type").val())))
}),$(".recent-exercises .current-page").html(a);var s="",r=0;for(var i in e){var o=e[i].exerciseid,l=e[i].name;if(r>=7*a)break;r>=7*a-7&&((t[o].weight<1||void 0===t[o].weight)&&(t[o].weight=""),(t[o].reps<1||void 0===t[o].reps)&&(t[o].reps=""),(t[o].rpe<1||void 0===t[o].rpe)&&(t[o].rpe=""),(t[o].percentage<1||void 0===t[o].percentage)&&(t[o].percentage=""),s=s+'<div class="row modal-new-recent-item recentexercise-'+o+'"><input type="checkbox" value="" class="modal-new-checkbox recentexercise-'+o+'"> <div class="modal-new-exercise-name">'+l+'</div><div class="modal-new-inputs modal-new-main"><a href="javascript:void(0);" class="modal-new-input modal-new-more-link" onclick="javascript:$(\'.modal-new-recent-item.recentexercise-'+o+' .modal-new-more\').slideToggle();">More <i class="fa fa-caret-down"></i></a><div class="modal-new-input"><input title="Weight" min="0" type="number" class="form-control weight" placeholder="Weight" step="0.01" value="'+t[o].weight+'"></div><div class="modal-new-input"><input title="Reps" min="0" type="number" class="form-control reps" placeholder="Reps" step="0.1" value="'+t[o].reps+'"></div>  </div><div class="modal-new-inputs modal-new-more"><div class="modal-new-input extra-input">&nbsp;</div><div class="modal-new-input"><input title="RPE" min="0" type="number" class="form-control rpe" placeholder="RPE" step="0.1" value="'+t[o].rpe+'"></div><div class="modal-new-input"><input title="%1RM" min="0" type="number" class="form-control percentage" placeholder="%1RM" step="0.01" value="'+t[o].percentage+'"></div></div></div>'),r+=1}$(".modal-new-recent-items").html(s),$("[title]").tooltip({delay:{show:0,hide:0}});var d=Math.ceil(Object.keys(e).length/7);if(0!==d){for(s="",s+='<li><a href="javascript:void(0);"  onclick="javascript:myDiary_NewModelChangeRecentPage(0)" ',1==a&&(s+="disabled"),s+=' aria-label="Previous"> <span aria-hidden="true">&laquo;</span></a></li>',r=1;d>=r&&5>r;)s+='<li><a href="javascript:void(0);" ',r==a&&(s+='style="background-color:#eee"'),s=s+' onclick="javascript:myDiary_NewModelChangeRecentPage('+r+')">'+r+"</a></li>",r+=1;s+='<li><a href="javascript:void(0);" onclick="javascript:myDiary_NewModelChangeRecentPage(6)"  ',a==d&&(s+="disabled"),s+=' aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>',$(".pagination.recent").html(s),selectedPaginatedItems.each(function(){var e=$(this);$(".modal-new-checkbox").each(function(){e.attr("class")===$(this).attr("class")&&($(this).prop("checked",!0),$(".modal-new-recent-items .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .reps").val($(".saved-exercise-data .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .reps").val()),$(".modal-new-recent-items .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .weight").val($(".saved-exercise-data .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .weight").val()),$(".modal-new-recent-items .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .rpe").val($(".saved-exercise-data .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .rpe").val()),$(".modal-new-recent-items .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .percentage").val($(".saved-exercise-data .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .percentage").val()),setTimeout(function(){void 0!==$(".saved-exercise-data .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .sets").val()&&$(".modal-new-recent-items .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .sets").val($(".saved-exercise-data .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .sets").val())},750),setTimeout(function(){void 0!==$(".saved-exercise-data .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .onerm").val()&&($(".modal-new-recent-items .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .onerm").val($(".saved-exercise-data .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .onerm").val()),$(".modal-new-recent-items .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .type").val($(".saved-exercise-data .modal-new-recent-item."+e.attr("class").split(" ")[1]+" .type").val()))},100))})}),$(".modal-new-checkbox").unbind(),$(".modal-new-checkbox").on("change",function(){if($(".modal-new-checkbox").unbind(),!$(this).is(":checked")){var e=$(this);selectedPaginatedItems.each(function(t){e.attr("class")===$(this).attr("class")&&(selectedPaginatedItems.splice(t,1),$(".saved-exercise-data .modal-new-recent-item."+e.attr("class").split(" ")[1]).remove())})}}),1===d&&$(".pagination.recent").css({"padding-left":"92px"}),2===d&&$(".pagination.recent").css({"padding-left":"88px"}),3===d&&$(".pagination.recent").css({"padding-left":"74px"}),4===d&&$(".pagination.recent").css({"padding-left":"44px"})}}function myDiary_NewModelChangeRecentPage(e){if(e>=6){if(e=parseInt($(".recent-exercises .current-page").html())+1,e>$(".pagination.recent").children().length-2)return}else if(0>=e&&(e=parseInt($(".recent-exercises .current-page").html())-1,1>e))return;var t={},a={},s=mlpObject.selectResults({limit:35,type:"exercises"}).result;if(s.success===!0){var r;for(r in s.data)t[s.data[r].exerciseid]=s.data[r].name,a[s.data[r].exerciseid]=s.data[r].details;myDiary_NewModelAddRecent(s.data,a,e)}}function myDiary_NewModelAddSearch(e,t){$(".saved-exercise-data").length<1&&$(".modal-content").append("<div class='saved-exercise-data' style='display:none;'></div>"),$(".modal-new-checkbox:checked").each(function(){var e=$(this),t=!1,a=".modal-new-search-item."+e.attr("class").split(" ")[1];selectedPaginatedItems.each(function(){return e.attr("class")===$(this).attr("class")?($(".saved-exercise-data "+a+" .reps").val($(".modal-search-results "+a+" .reps").val()),$(".saved-exercise-data "+a+" .weight").val($(".modal-search-results "+a+" .weight").val()),$(".saved-exercise-data "+a+" .rpe").val($(".modal-search-results "+a+" .rpe").val()),$(".saved-exercise-data "+a+" .percentage").val($(".modal-search-results "+a+" .percentage").val()),void 0!==$(".modal-search-results "+a+" .sets").val()&&$(".saved-exercise-data "+a+" .sets").val($(".modal-search-results "+a+" .sets").val()),void 0!==$(".modal-search-results "+a+" .onerm").val()&&($(".saved-exercise-data "+a+" .onerm").val($(".modal-search-results "+a+" .onerm").val()),$(".saved-exercise-data "+a+" .type").val($(".modal-search-results "+a+" .type").val())),t=!0,!1):void 0}),t===!1&&(selectedPaginatedItems.push(this),e.remove(),$(".saved-exercise-data").append('<div class="'+a.split(".").join(" ")+'">'+$(a).html()+"</div>"),$(".saved-exercise-data "+a+" .reps").val($(".modal-search-results "+a+" .reps").val()),$(".saved-exercise-data "+a+" .weight").val($(".modal-search-results "+a+" .weight").val()),$(".saved-exercise-data "+a+" .rpe").val($(".modal-search-results "+a+" .rpe").val()),$(".saved-exercise-data "+a+" .percentage").val($(".modal-search-results "+a+" .percentage").val()),void 0!==$(".modal-search-results "+a+" .sets").val()&&$(".saved-exercise-data "+a+" .sets").val($(".modal-search-results "+a+" .sets").val()),void 0!==$(".modal-search-results "+a+" .onerm").val()&&($(".saved-exercise-data "+a+" .onerm").val($(".modal-search-results "+a+" .onerm").val()),$(".saved-exercise-data "+a+" .type").val($(".modal-search-results "+a+" .type").val())))}),$(".search-exercises .current-page").html(t);var a,s="",r=0;Object.keys(e).length<1&&(s+="No results for this exercise. <a href=\"javascript:void(0);\" onclick=\"$('body').removeClass('modal-open');$('body').css('padding-right','0px');$('.loader').show();load('myexercises',myExercises_Load);\">Create it?</a>");for(a in e){if(r>=6*t)break;r>=6*t-6&&(s=s+'<div class="row modal-new-search-item searchexercise-'+a+'"><input type="checkbox" value="" class="modal-new-checkbox searchexercise-'+a+'"> <div class="modal-new-exercise-name">'+e[a]+'</div><div class="modal-new-inputs modal-new-main"><a href="javascript:void(0);" class="modal-new-input modal-new-more-link" onclick="javascript:$(\'.modal-new-search-item.searchexercise-'+a+' .modal-new-more\').slideToggle();">More <i class="fa fa-caret-down"></i></a><div class="modal-new-input"><input title="Weight" step="0.01" min="0" type="number" class="form-control weight" placeholder="Weight" required></div><div class="modal-new-input"><input title="Reps" step="0.1" min="0" type="number" class="form-control reps" placeholder="Reps" required></div></div><div class="modal-new-inputs modal-new-more"><div class="modal-new-input extra-input">&nbsp;</div> <div class="modal-new-input"><input title="RPE" step="0.1" min="0" type="number" class="form-control rpe" placeholder="RPE" required></div><div class="modal-new-input"><input title="%1RM" step="0.01" min="0" type="number" class="form-control percentage" placeholder="%1RM" required></div></div></div>'),r+=1}$(".modal-search-results").html(s),$("[title]").tooltip({delay:{show:0,hide:0}});var i=Math.ceil(Object.keys(e).length/6);if(0!==i){s="",s+='<li><a href="javascript:void(0);"  onclick="javascript:myDiary_NewModelChangeSearchPage(0)" ',1==t&&(s+="disabled"),s+=' aria-label="Previous"> <span aria-hidden="true">&laquo;</span></a></li>',r=4*Math.floor((t-1)/4)+1,1>r&&(r=1);for(var o=r+4;i>=r&&o>r;)s+='<li><a href="javascript:void(0);" ',r==t&&(s+='style="background-color:#eee"'),s=s+' onclick="javascript:myDiary_NewModelChangeSearchPage('+r+')">'+r+"</a></li>",r+=1;s+='<li><a href="javascript:void(0);" onclick="javascript:myDiary_NewModelChangeSearchPage(6)"  ',t==i&&(s+="disabled"),s+=' aria-label="Next"><span aria-hidden="true">&raquo;</span></a></li>',$(".pagination.search").html(s),selectedPaginatedItems.each(function(){var e=$(this);$(".modal-new-checkbox").each(function(){e.attr("class")===$(this).attr("class")&&($(this).prop("checked",!0),$(".modal-search-results .modal-new-search-item."+e.attr("class").split(" ")[1]+" .reps").val($(".saved-exercise-data .modal-new-search-item."+e.attr("class").split(" ")[1]+" .reps").val()),$(".modal-search-results .modal-new-search-item."+e.attr("class").split(" ")[1]+" .weight").val($(".saved-exercise-data .modal-new-search-item."+e.attr("class").split(" ")[1]+" .weight").val()),$(".modal-search-results .modal-new-search-item."+e.attr("class").split(" ")[1]+" .rpe").val($(".saved-exercise-data .modal-new-search-item."+e.attr("class").split(" ")[1]+" .rpe").val()),$(".modal-search-results .modal-new-search-item."+e.attr("class").split(" ")[1]+" .percentage").val($(".saved-exercise-data .modal-new-search-item."+e.attr("class").split(" ")[1]+" .percentage").val()),setTimeout(function(){void 0!==$(".saved-exercise-data .modal-new-search-item."+e.attr("class").split(" ")[1]+" .sets").val()&&$(".modal-search-results .modal-new-search-item."+e.attr("class").split(" ")[1]+" .sets").val($(".saved-exercise-data .modal-new-search-item."+e.attr("class").split(" ")[1]+" .sets").val())},750),setTimeout(function(){void 0!==$(".saved-exercise-data .modal-new-search-item."+e.attr("class").split(" ")[1]+" .onerm").val()&&($(".modal-search-results .modal-new-search-item."+e.attr("class").split(" ")[1]+" .onerm").val($(".saved-exercise-data .modal-new-search-item."+e.attr("class").split(" ")[1]+" .onerm").val()),$(".modal-search-results .modal-new-search-item."+e.attr("class").split(" ")[1]+" .type").val($(".saved-exercise-data .modal-new-search-item."+e.attr("class").split(" ")[1]+" .type").val()))},100))})}),$(".modal-new-checkbox").unbind(),$(".modal-new-checkbox").on("change",function(){if($(".modal-new-checkbox").unbind(),!$(this).is(":checked")){var e=$(this);selectedPaginatedItems.each(function(t){e.attr("class")===$(this).attr("class")&&(selectedPaginatedItems.splice(t,1),$(".saved-exercise-data .modal-new-search-item."+e.attr("class").split(" ")[1]).remove())})}}),1===i&&$(".pagination.search").css({"padding-left":"92px"}),2===i&&$(".pagination.search").css({"padding-left":"88px"}),3===i&&$(".pagination.search").css({"padding-left":"74px"}),4===i&&$(".pagination.search").css({"padding-left":"44px"})}}function myDiary_NewModelChangeSearchPage(e){if(e>=6){var t=parseInt($(".search-exercises .current-page").html());if(parseInt($(".total-exercises").html())<=6*t)return;e=parseInt($(".search-exercises .current-page").html())+1}else if(0>=e&&(e=parseInt($(".search-exercises .current-page").html())-1,1>e))return;var a=$(".modal-new-search-term").html(),s={},r=mlpObject.getExercises({name:a}).result;if(r.success===!0){var i;for(i in r.data)s[r.data[i].id]=r.data[i].name;myDiary_NewModelAddSearch(s,e)}}function myDiary_appendHTML(e){var t=e[0].exercise.split(" ").join("");$(".my-exercises").append(myDiary_generateHTML(e)),$("."+t+" .old").on("click",function(e){myDiary_ExerciseClickRegisterFunction(e.target)}),$("."+t+" .btn-circle").on("click",function(e){myDiary_ExerciseClickRegisterFunction(e.target)}),$("."+t+" .btn-options").on("click",function(e){myDiary_ExerciseClickRegisterFunction(e.target)}),$("."+t+" .save-form").on("submit",function(e){e.preventDefault(),myDiary_ExerciseClickRegisterFunction(e.target)}),$(".note").handleKeyboardChange(1e3).change(function(e){myDiary_ExerciseClickRegisterFunction(e.target)}),toggleCaret("."+t+" .old","."+t+" .old i","fa-caret-up","fa-caret-down"),$("."+t+" .view-added").hide(),$("."+t+" .view-log").hide(),$("."+t+" .view-exercise-settings").hide(),$("."+t+" .view-old").hide()}function myDiary_generateHTML(e){var t=JSON.parse(JSON.stringify(e)),a=0;for(var s in e)a+=1*parseInt(e[s].reps)*parseInt(e[s].weight);var r=t.pop();console.log(t.length);var i="";for(null===r.notes&&(r.notes=""),i=i+'<div class="added-exercise '+r.exercise.split(" ").join("")+" exercise-"+r.exerciseid+'"><div class="added row set-'+r.id+'"><div class="col-xs-6 exercise">',i=t.length>0?i+'<a href="javascript:void(0);" title="Expand all sets" class="topset old '+r.exercise.split(" ").join("")+'">'+r.exercise+' <i class="fa fa-caret-down"></i></a>':i+'<span class="topset old '+r.exercise.split(" ").join("")+'"">'+r.exercise+"</span>",i=i+'</div><div class="col-xs-1 details exerciseid" style="display:none;">'+r.exerciseid+'</div><div class="col-xs-1 details id" style="display:none;">'+r.id+'</div><div class="col-xs-1 details reps">'+r.reps+'</div><div class="col-xs-1 details set">'+r.set+'</div><div class="col-xs-1 details weight">'+r.weight+$(".units").html()+'</div><div class="col-xs-1 details rpe">'+r.rpe+'</div><div class="col-xs-1 details percentage">'+r.onerm+'%</div><div class="col-xs-1 details add"><a href="javascript:void(0);" class="btn btn-default btn-circle added" title="Add a new set to this exercise" style="margin-right: 2px;" data-toggle="button"><i class="fa fa-plus" ></i></a><a href="javascript:void(0);" class="btn btn-danger btn-circle exercise-delete" title="Delete exercise from your diary" style="margin-right: 2px;"><i class="fa fa-times"></i></a><a href="javascript:void(0);" class="btn btn-success btn-circle log" title="View exercise log" style="margin-right: 2px;" data-toggle="button"><i class="fa fa-book"></i></a><a href="javascript:void(0);" class="btn btn-primary btn-circle exercise-settings" title="View settings for this set" data-toggle="button"><i class="fa fa-cog"></i></a></div></div><div class="view-added row"><div class="col-xs-6 headers" style="line-height:70px;"><i class="fa fa-plus"></i> New Set</div><form role="form" class="save-form"><div class="form-group">',0==r.reps&&(r.reps=""),0==r.weight&&(r.weight=""),0==r.rpe&&(r.rpe=""),0==r.onerm&&(r.onerm=""),i=i+'<div class="col-xs-1 details reps"><input type="number" min="0" class="form-control" placeholder="Reps" step="0.1" value="'+r.reps+'"></div><div class="col-xs-1 details set"><input type="number" class="form-control" min="0" placeholder="Set" value="'+(parseInt(r.set)+1)+'" required></div><div class="col-xs-1 details weight"><input type="number" class="form-control" min="0" placeholder="Weight" step="0.01" value="'+r.weight+'"></div><div class="col-xs-1 details rpe"><input type="number" class="form-control" min="0" placeholder="RPE" step="0.1" value="'+r.rpe+'"></div><div class="col-xs-1 details percentage"><input type="number" class="form-control" min="0" placeholder="%1RM" step="0.01" value="'+r.onerm+'"></div><div class="col-xs-1"><button type="submit" class="btn btn-primary save" title="Add set to diary"><i class="fa fa-plus"></i> Add</button></div></div></form></div><div class="view-log row"><div class="row" style="text-align:left;padding-left:15px;"><div class="col-xs-4 col-xs-offset-7" style="margin-left: 60.5%;"><span style="font-size: 16px;">Current Volume Total: '+a+$(".units").html()+' <a href="#mydiary" title="Reload diary" onclick="load(\'mydiary\', myDiary_Load,{date:\''+$(".selected-date-hidden").html()+'\'});"><i class="fa fa-refresh"></i></a></span></div></div><div class="col-xs-6 headers">Exercise Log</div><form role="form"><div class="form-group"><div class="col-xs-5"><textarea class="form-control note" rows="5" placeholder="Write notes about this set...">'+r.notes+'</textarea></div></div></form><div class="col-xs-4 history"><div class="headers">Records <i class="fa fa-trophy"></i></div><div class="row records">'+r.records[0]+'</div><div class="row records">'+r.records[1]+'</div><div class="row records">'+r.records[2]+'</div><div class="row records">'+r.records[3]+'</div></div></div><div class="view-exercise-settings row"><div class="col-xs-6 headers">Settings</div><div class="col-xs-2 " style="width:15%"><a href="javascript:void(0);" class="btn btn-primary btn-options edit" title="Edit this set"><i class="fa fa-pencil-square-o"></i> Edit Set</a></div><div class="col-xs-2" style="width:15%"><a href="javascript:void(0);" class="btn btn-danger btn-options delete" title="Delete this set"><i class="fa fa-times"></i> Delete Set</a></div><div class="col-xs-2" style="width:15%"><a href="javascript:void(0);" class="btn btn-success btn-options view-notes" title="View your notes for this set"><i class="fa fa-book"></i> View Notes</a></div><div class="col-xs-2" style="width:15%"><a href="javascript:void(0);" class="btn btn-default btn-options share-set" title="Share this set" onclick="$(\'.share'+r.id+'\').slideToggle();"><i class="fa fa-share-alt"></i> Share Set</a><div class="share'+r.id+'" style="display:none;margin-top:5px;text-align:center;"><a style="padding: 5px;margin-left: -10px;" href="javascript:void(0);" onclick="fb_feed(\'\', \'I just got a set of '+r.reps+" reps with "+r.weight+$(".units").html()+" on "+r.exercise+'!\',\'\')"><i style="color:#3B5998;" class="fa fa-facebook-square fa-3x"></i></a><a href="https://plus.google.com/share?url=www.myliftingpal.net" onclick="javascript:window.open(this.href,\'\', \'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600\');gp_share();return false;"><i style="color:#db5a3c;" class="fa fa-google-plus-square fa-3x"></i></a> </div></div></div><div class="view-old">';t.length;){var o=t.pop();i=i+'<div class="old-set"><div class="added row set-'+o.id+' "><div class="col-xs-6 exercise"> </div><div class="col-xs-1 details id" style="display:none;">'+o.id+'</div><div class="col-xs-1 details reps">'+o.reps+'</div><div class="col-xs-1 details set">'+o.set+'</div><div class="col-xs-1 details weight">'+o.weight+$(".units").html()+'</div><div class="col-xs-1 details rpe">'+o.rpe+'</div><div class="col-xs-1 details percentage">'+o.onerm+'%</div><div class="col-xs-1 details add"><a href="javascript:void(0);" class="btn btn-primary btn-circle exercise-settings" title="View settings for this set" data-toggle="button"><i class="fa fa-cog"></i></a></div></div><div class="view-exercise-settings row"><div class="col-xs-6 headers">Settings</div><div class="col-xs-2" style="width:15%"><a href="javascript:void(0);" class="btn btn-primary btn-options edit" title="Edit this set"><i class="fa fa-pencil-square-o"></i> Edit Set</a></div><div class="col-xs-2" style="width:15%"><a href="javascript:void(0);" class="btn btn-danger btn-options delete" title="Delete this set"><i class="fa fa-times"></i> Delete Set</a></div><div class="col-xs-2" style="width:15%"><a href="javascript:void(0);" class="btn btn-success btn-options view-notes" title="View your notes for this set"><i class="fa fa-book"></i> View Notes</a></div><div class="col-xs-2" style="width:15%"><a href="javascript:void(0);" class="btn btn-default btn-options share-set" title="Share this set" onclick="$(\'.share'+o.id+'\').slideToggle();"><i class="fa fa-share-alt"></i> Share Set</a><div class="share'+o.id+'" style="display:none;margin-top:5px;text-align:center;"><a style="padding: 5px;margin-left: -10px;" href="javascript:void(0);" onclick="fb_feed(\'\', \'I just got a set of '+o.reps+" reps with "+o.weight+$(".units").html()+" on "+r.exercise+'!\',\'\')"><i style="color:#3B5998;" class="fa fa-facebook-square fa-3x"></i></a><a href="https://plus.google.com/share?url=www.myliftingpal.net" onclick="javascript:window.open(this.href,\'\', \'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600\');gp_share();return false;"><i style="color:#db5a3c;" class="fa fa-google-plus-square fa-3x"></i></a> </div></div></div></div>'}return i+="</div><hr/></div>"}function toggleCaret(e,t,a,s){$(e).on("click",function(){$(t).hasClass(a)?($(t).removeClass(a),$(t).addClass(s)):($(t).removeClass(s),$(t).addClass(a))})}function checkboxToRadio(){$("input:checkbox").on("click",function(){var e=$(this);if(e.is(":checked")){var t="input:checkbox";$(t).prop("checked",!1),e.prop("checked",!0)}else e.prop("checked",!1)})}function checkURL(e){return null!=e.match(/\.(jpeg|jpg|gif|png)$/)}function moveScroller(e,t){var a=function(){if($(e).length<1)return void $(window).unbind();var a=$(window).scrollTop(),s=$(e).offset().top,r=$(t);a>s?r.css({position:"fixed",top:"0px",right:"58px"}):s>=a&&r.css({position:"absolute",top:"",right:"100px"})};$(window).scroll(a),a()}function scrollTo(e){$(document.body).animate({scrollTop:$(e).offset().top},500)}function getAllowChangePage(){if($(".myexercises-new-name").val()||$(".myexercises-new-muscle").val()||$(".myexercises-new-type").val()||$(".myworkouts-new-name").val()||$(".myprograms-new-name").val()||$(".myprograms-new-duration").val()||$(".new-workout.myexercises-list tr").length>0){var e=!1;$("#confirmModal").modal(),$(".stay-on-page").click(function(){e=!1}),$(".accept-move").click(function(){e=!0}),$("#confirmModal").on("hidden.bs.modal",function(){return $("#confirmModal").unbind(),e})}return!0}function setupRoutes(){var e=window.location.hash.substr(1).split("/")[0];if("mydiary"===e)load("mydiary",myDiary_Load,{date:moment()});else if("myexercises"===e)load("myexercises",myExercises_Load);else if("myworkouts"===e)load("myworkouts",myWorkouts_Load);else if("myprograms"===e)load("myprograms",myPrograms_Load);else if("mystats"===e)load("mystats",myStats_Load);else if("search"===e)load("search",searchPage_Load);else if("help"===e)load("help",helpPage_Load);else if("terms"===e)load("terms",termsPage_Load);else if("privacy"===e)load("privacy",privacyPage_Load);else if("contact"===e)load("contact",contactPage_Load);else if("api"===e)load("api",apiPage_Load);else if("profile"===e)load("profile",myProfile_Load);else if("viewprofile"===e){var t=window.location.hash.substr(1).split("/")[1];void 0===t||isNaN(t)||!isFinite(t)?load("mydiary",myDiary_Load,{date:moment()}):load("viewprofile",profilePage_Load,{id:window.location.hash.substr(1).split("/")[1]})}else if("viewdiary"===e){var t=window.location.hash.substr(1).split("/")[1];void 0===t||isNaN(t)||!isFinite(t)?load("mydiary",myDiary_Load,{date:moment()}):load("viewdiary",diaryPage_Load,{id:window.location.hash.substr(1).split("/")[1],date:moment()})}else"settings"===e?load("settings",mySettings_Load):load("mydiary",myDiary_Load,{date:moment()});$(window).on("hashchange",function(){window.location.hash.substr(1).split("/")[0]!==$(".current-page").html().split("/")[0]&&location.reload()})}var mlpObject=mlp("d22c3cf2949cd85a21ddcf725f71dcef"),selectedPaginatedItems=$("input:checked");""===mlpObject.session&&(document.location.href="login.html"),$(document).ready(function(){function e(){$("#helpModal").modal()}var t=mlpObject.getUser().result;if(t.success===!0){$(".userid").html(t.data.id),$(".units").html(t.data.units);var a=t.data.username;$(".username").html(a.charAt(0).toUpperCase()+a.slice(1)),$(".user-dp").css({"background-image":"url("+t.data.dp+")"});var s=t.data.requests.length;$(".request-total").html(s),s>0&&$(".request-total").css({"background-color":"red"}),setInterval(function(){var e=mlpObject.getRequests().result.data,t=e.length;$(".request-total").html(t),$(".badge.request-total").css(t>0?{"background-color":"red"}:{"background-color":""})},12e4)}else $.removeCookie("mlpsession"),document.location.href="login.html";$(".navbar-brand").bigSlide({speed:200,easyClose:!1}),$(".search-btn.findusers-mainnav").on("click",function(){$(".navbar-brand.menu-open").click(),setTimeout(function(){load("search",searchPage_Load)},"300")}),$(".search-form.findusers-mainnav").keypress(function(e){13===e.which&&$(".search-btn.findusers-mainnav").click()}),$(".friend-requests").on("click",function(e){e.preventDefault(),load("search",searchPage_Load)}),$(".user-profile").on("click",function(e){e.preventDefault(),$(".dropdown-toggle i:last").removeClass("fa-caret-up"),$(".dropdown-toggle i:last").addClass("fa-caret-down"),setTimeout(function(){load("profile",myProfile_Load)},"500")}),$(".user-settings").on("click",function(e){e.preventDefault(),$(".dropdown-toggle i:last").removeClass("fa-caret-up"),$(".dropdown-toggle i:last").addClass("fa-caret-down"),setTimeout(function(){load("settings",mySettings_Load)},"500")}),$(".logout").on("click",function(){mlpObject.logout(),document.location.href="login.html"}),$(".help").on("click",function(e){e.preventDefault(),load("help",helpPage_Load)}),$(".mydiary").on("click",function(e){e.preventDefault(),setTimeout(function(){load("mydiary",myDiary_Load,{date:moment()})},"300")}),$(".myexercises").on("click",function(e){e.preventDefault(),setTimeout(function(){load("myexercises",myExercises_Load)},"300")}),$(".myworkouts").on("click",function(e){e.preventDefault(),setTimeout(function(){load("myworkouts",myWorkouts_Load)},"300")}),$(".myprograms").on("click",function(e){e.preventDefault(),setTimeout(function(){load("myprograms",myPrograms_Load)},"300")}),$(".mystats").on("click",function(e){e.preventDefault(),load("mystats",myStats_Load)}),$(".terms").on("click",function(e){e.preventDefault(),load("terms",termsPage_Load)}),$(".privacy").on("click",function(e){e.preventDefault(),load("privacy",privacyPage_Load)}),$(".contactus").on("click",function(e){e.preventDefault(),load("contact",contactPage_Load)}),$(".api").on("click",function(e){e.preventDefault(),load("api",apiPage_Load)}),$("#menu").hover(function(){"0px"===$(".navbar-brand").css("margin-left")&&$(".navbar-brand").addClass("animated wobble")},function(){$(".navbar-brand").removeClass("animated wobble")}),toggleCaret(".dropdown-toggle",".dropdown i:last","fa-caret-up","fa-caret-down"),$(".navbar-right .dropdown").on("show.bs.dropdown",function(){$(".navbar-right .dropdown i:last").addClass("fa-caret-up"),$(".navbar-right .dropdown i:last").removeClass("fa-caret-down"),$(this).find(".dropdown-menu").first().stop(!0,!0).slideDown()}),$(".navbar-right .dropdown").on("hide.bs.dropdown",function(){$(".navbar-right .dropdown i:last").removeClass("fa-caret-up"),$(".navbar-right .dropdown i:last").addClass("fa-caret-down"),$(this).find(".dropdown-menu").first().stop(!0,!0).slideUp()}),"ontouchstart"in window||$("[title]").tooltip(),enquire.register("screen and (max-width: 860px)",{match:function(){$(".navbar-right").addClass("wrap push")},unmatch:function(){$(".navbar-right").removeClass("wrap push")}},!0),setupRoutes(),0==moment(t.data.created).diff(moment(),"days")&&void 0===$.cookie("mlptutorial")&&$.get("start.html",function(t){$("#helpModal").html(t),e()})});