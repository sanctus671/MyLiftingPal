<!DOCTYPE html>
<html>
<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">	
		<meta name="author" content="MyLiftingPal" />
		<link rel="shortcut icon" type="image/x-icon" href="images/favicon.ico" />
		<meta name="description" content="MyLiftingPal is an app that lets you easily track your lifting." />
		<meta name="keywords"  content="myliftingpal, lifting, weight, pal" />
		
                <title>MyLiftingPal</title>

		
		<link href="css/bootstrap.min.css" rel="stylesheet">
                <link href="css/bootstrap-notify.css" rel="stylesheet">
                <link href="css/datepicker3.css" rel="stylesheet">

                <link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/font-awesome.min.css">
		
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script src="js/jquery.cookie.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/enquire.min.js"></script>
		<script src="js/bigSlide.js"></script>
		<script src="js/keyboardHandler.js"></script>
		<script src="js/moment.min.js"></script>
                <script src="js/bootstrap-notify.js"></script>
                <script src="js/bootstrap-datepicker.js"></script>

		<script src="js/mlp.js"></script>
                
</head>
	
<body style="overflow-x:hidden;min-width:842px;">
<div class="userid" style="display:none;"></div>
<div class="header-image">	
	
	<div class="content">
            <div class="row">
                 <a href="index.html"><div style="float: none; margin: 0 auto; text-align:center; height:200px; padding-top:10px; background-image: url('images/header.svg'); background-repeat: no-repeat; background-size: 1000px 1000px; background-position: center;margin-left: 6em;  "></div></a>
            </div>
        </div>
		
<nav class="navbar navbar-default" role="navigation" style="">
    <div class="navbar-header push wrap" style="left:3em;">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#search" style="border-color:transparent; left:-3em;">Account <i class="fa fa-caret-down"></i></button>
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#links" style="border-color:transparent; left:-3em;">More <i class="fa fa-caret-down"></i></button> 
        <a class="navbar-brand" href="javascript:void(0);"><img src="images/db.png" style="width:15px;margin-top:-15px;"></a>
		<a class="navbar-brand" href="javascript:void(0);" style="position:absolute; left:20px; width: 140px;">My Training <i class="fa fa-caret-right"></i></a>
		
    </div>
	

    <ul class="collapse navbar-collapse nav navbar-nav navbar-right"  id="search">
	        <li class="dropdown">
          <a href="javascript:void(0);" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><div class="username">Sanctus671</div> <i class="fa fa-user"></i> <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu " role="menu">
            <li><a href="javascript:void(0);" class="user-profile">Profile</a></li>
            <li><a href="javascript:void(0);" class="user-settings">Settings</a></li>
            <li class="divider"></li>
            <li><a href="javascript:void(0);" class="logout">Logout</a></li>
          </ul>
        </li>
    </ul>	
	
	
    <ul class="collapse navbar-collapse nav navbar-nav navbar-right" id="links">
	  <li><a href="http://www.facebook.com/myliftingpal" target="_blank"><i class="fa fa-facebook"></i> Facebook</a></li>
	  <li><a href="http://plus.google.com/+MyliftingpalNetwork" target="_blank"><i class="fa fa-google-plus"></i> Google+</a></li>
	  <li><a href="http://twitter.com/myliftingpal" target="_blank"><i class="fa fa-twitter"></i> Twitter</a></li>
	  <li><a href="javascript:void(0);" class="help"><i class="fa fa-info"></i> Help</a></li>
    </ul>

</nav>

</div>

<div id="menu" class="panel" role="navigation">
    <div style="height:100px;"><img src="images/db.png" class="panel-close" width="60"></div>
    <ul>
		<li style="height:40px;border-top:none;padding: 0px 5px;">    
			<div class="input-group panel-close">
				<input type="text" class="form-control search-form" placeholder="Search">
				<span class="input-group-btn">
					<button class="btn btn-default search-btn" type="button"><i class="fa fa-search"></i></button>
				</span>
			</div>
		</li>
		<li><a href="javascript:void(0);" class="mydiary"><i class="fa fa-book"></i> <span class="panel-close">My Diary</span></a></li>
        <li><a href="javascript:void(0);" class="myexercises"><i class="fa fa-heart"></i> <span class="panel-close">My Exercises</span></a></li>
        <li><a href="javascript:void(0);" class="myworkouts"><i class="fa fa-child"></i> <span class="panel-close">My Workouts</span></a></li>
        <li><a href="javascript:void(0);" class="myprograms"><i class="fa fa-calendar"></i> <span class="panel-close">My Programs</span></a></li>
		<li><a href="javascript:void(0);" class="mystats"><i class="fa fa-line-chart"></i> <span class="panel-close">My Stats</span></a></li>
    </ul>
</div>

<div class="loader" style="position:absolute; right: 30px; top:310px;"><i class="fa fa-cloud-download fa-2x"></i></div> <!--<img class="loader" src="images/loading.gif" alt="Loading" style="position:absolute; width:250px; right: 0px; top:220px;"/>-->
<div class="load-into-container wrap push"></div>
	
	
<div class='notifications bottom-right'></div>	
 <div class="footer wrap push">
	<p><a href="javascript:void(0);" class="terms">Terms</a> | <a href="javascript:void(0);" class="privacy">Privacy</a> | <a href="javascript:void(0);" class="contactus">Contact Us</a> | <a href="javascript:void(0);" class="api">API</a> </p>
   <p>Copyright <i class="fa fa-copyright"></i> 2014-2015 MyLiftingPal</p>
 </div>

<script>

//test exercises (will need to be generated from json api)
var testSet3 = {exercise: "Bench Press", reps: "8", set: "3", weight: "87.5", rpe: "9", onerm: "75", notes : "", records: ["Best volume with 8 reps: 8x5 with 90kg", "Best rep total with 87.5kg: 9", "Lowest RPE for 87.5kg for 8 reps: 8.5", "Last time you did 5x5 with 100kg"]} ;

var testSet2 = {exercise:"Bench Press", reps:"8", set:"2", weight: "87.5", rpe: "8.5", onerm: "75", notes : "", records: ["Best volume with 8 reps: 8x5 with 90kg", "Best rep total with 87.5kg: 9", "Lowest RPE for 87.5kg for 8 reps: 8.5", "Last time you did 5x5 with 100kg"]} ;

var testSet1 = {exercise:"Bench Press", reps:"8", set:"1", weight: "87.5", rpe: "8", onerm: "75", notes : "", records: ["Best volume with 8 reps: 8x5 with 90kg", "Best rep total with 87.5kg: 9", "Lowest RPE for 87.5kg for 8 reps: 8.5", "Last time you did 5x5 with 100kg"]} ;


var testExercise = [testSet1, testSet2, testSet3];


var test2Set3 = {exercise: "Squat", reps: "10", set: "3", weight: "500", rpe: "9", onerm: "90", notes : "", records: ["Best volume with 8 reps: 8x5 with 90kg", "Best rep total with 87.5kg: 9", "Lowest RPE for 87.5kg for 8 reps: 8.5", "Last time you did 5x5 with 100kg"]} ;

var test2Set2 = {exercise:"Squat", reps:"12", set:"2", weight: "190", rpe: "8.5", onerm: "80", notes : "", records: ["Best volume with 8 reps: 8x5 with 90kg", "Best rep total with 87.5kg: 9", "Lowest RPE for 87.5kg for 8 reps: 8.5", "Last time you did 5x5 with 100kg"]} ;

var test2Set1 = {exercise:"Squat", reps:"15", set:"1", weight: "180", rpe: "8", onerm: "75", notes : "", records: ["Best volume with 8 reps: 8x5 with 90kg", "Best rep total with 87.5kg: 9", "Lowest RPE for 87.5kg for 8 reps: 8.5", "Last time you did 5x5 with 100kg"]} ;


var test2Exercise = [test2Set1, test2Set2, test2Set3];


var mlpObject = mlp('d22c3cf2949cd85a21ddcf725f71dcef');
if (mlpObject.session === ''){
	document.location.href="login.html";
}



	$(document).ready(function(){
	
		//INITIALISE MLP
		
		
		
		
		//SET USER DATA
		var userData = mlpObject.getUser().result;
		if (userData["success"] === true){
		
			$(".userid").html(userData["data"]["id"]);
                        var username = userData["data"]["username"];
			$(".username").html(username.charAt(0).toUpperCase() + username.slice(1));
		}
		
		
		
		//INITIALISE SLIDER
		$('.navbar-brand').bigSlide();
	
	
		//REGISTER NAV CLICK EVENTS
	
		$(".search-btn").on("click",function(e){
			console.log("searching for: " + $(".search-form").val());
		});
		
		$(".user-profile").on("click",function(e){
			console.log("wuna go to ma profile");
		});
		
		$(".user-settings").on("click",function(e){
			console.log("wuna go to ma settings");
		});
		
		$(".logout").on("click",function(e){
			mlpObject.logout();
			document.location.href="login.html";
		});
		
		$(".help").on("click",function(e){
			console.log("need halp");
		});
		
		$(".mydiary").on("click",function(e){
                    
                    
                    
			console.log("wuna load my diary");
                        setTimeout(function(){myDiary_Load(moment());},'300');
		});

		$(".myexercises").on("click",function(e){
			console.log("wuna load my exercises");
		});	
		
		$(".myworkouts").on("click",function(e){
			console.log("wuna load my workouts");
		});

		$(".myprograms").on("click",function(e){
			console.log("wuna load my programs");
		});	

		$(".mystats").on("click",function(e){
			console.log("wuna load my stats");
		});	

		$(".terms").on("click",function(e){
			console.log("wuna load terms");
		});	
		
		$(".privacy").on("click",function(e){
			console.log("wuna load privacy");
		});

		$(".contactus").on("click",function(e){
			console.log("wuna load contact");
		});	

		$(".api").on("click",function(e){
			console.log("wuna load api");
		});	

		
	
		//CARET CHANGING
		
		toggleCaret(".navbar-brand", ".navbar-brand i", "fa-caret-left", "fa-caret-right");
		toggleCaret(".dropdown-toggle", ".dropdown i:last", "fa-caret-up", "fa-caret-down");
                //toggleCaret(".panel-close", ".navbar-brand i", "fa-caret-left", "fa-caret-right");


		
		// ADD SLIDEDOWN ANIMATION TO DROPDOWN
		$('.dropdown').on('show.bs.dropdown', function(e){
			$(this).find('.dropdown-menu').first().stop(true, true).slideDown();
		});

		// ADD SLIDEUP ANIMATION TO DROPDOWN
		$('.dropdown').on('hide.bs.dropdown', function(e){
			$(this).find('.dropdown-menu').first().stop(true, true).slideUp();
		});
		
		//REGISTER MEDIA QUERIES
		
		//for navbar pushing menu  
		enquire.register("screen and (max-width: 860px)", {
			match : function() {
				$(".navbar-right").addClass("wrap push");
			},  
			unmatch : function() {
				$(".navbar-right").removeClass("wrap push");
			}
		},true); 		
		
		



		  
		//INITIAL LOAD OF MY DIARY
		
		myDiary_Load(moment());
		
		
  

  
});

	
	




/*MY DIARY FUNCTIONS*/

//click register functions
function myDiary_MainClickRegisterFunction(){
	$(".btn-circle-main").on("click",function(e){
		console.log("add new exercise");
                $('#newModal').modal();
	});	
        
	$(".accept-delete").on("click",function(e){
                $('#deleteModal').modal('hide');
                $('body').removeClass('modal-open');
                $('body').css('padding-right','0px');
                $(".loader").show();
                var id = $(".delete-result-id").text();
                
                mlpObject.removeResults({id:id});
                if (mlpObject.result["success"] === true){
                    myDiary_Load(moment($(".selected-date-hidden").text()));
                    $('.bottom-right').notify({message: { type: 'info', text: 'Set deleted' }}).show();
                    //console.log("trying to delete for: " + exerciseName + " id number: " + id);
                }
                else{
                    $('.bottom-right').notify({message: { type: 'danger', text: 'There was an error deleting set' }}).show();
                }
                $(".loader").hide();
	}); 
        
	$(".accept-edit").on("click",function(e){
            
                $('#editModal').modal('hide');
                $('body').removeClass('modal-open');
                $('body').css('padding-right','0px');            
                $(".loader").show();
                
                var id = $(".edit-result-id").text();
                var reps = $(".edit-result-reps").val();
                var set = $(".edit-result-set").val();
                var rpe = $(".edit-result-rpe").val();
                var weight = $(".edit-result-weight").val();
                var percentage = $(".edit-result-percentage").val();  
                

                
                mlpObject.changeResults({id:id, reps:reps, sets:set, rpe:rpe, weight:weight, percentage:percentage});
                if (mlpObject.result["success"] === true){
                    myDiary_Load(moment($(".selected-date-hidden").text()));
                    $('.bottom-right').notify({message: { type: 'info', text: 'Set updated' }}).show();
                }  
                else{
                    $('.bottom-right').notify({message: { type: 'warning', text: 'There was an error upating the set' }}).show();
                }
                $(".loader").hide();
                
	});         
	
	$(".change-date-left").on("click",function(e){
                $(".loader").show();
		myDiary_Load(moment($(".selected-date-hidden").text()).subtract(1, 'days').calendar('YYYY-MM-DD'));
	});		
	$(".change-date-right").on("click",function(e){
                $(".loader").show();
		myDiary_Load(moment($(".selected-date-hidden").text()).add(1, 'days').calendar('YYYY-MM-DD'));
	});		
	$(".change-date-input").on("change",function(e){
                $(".loader").show();
		myDiary_Load(moment($(".change-date-input").val()));
	});
        


}


function myDiary_Load(date){
        date = moment(date).format('YYYY-MM-DD');

        $.get( "mydiary.html", function( data ) {
                $( ".load-into-container" ).html( data );
                //set the date
                $( ".selected-date").html(moment(date).format('dddd, MMMM Do, YYYY'));
                $( ".selected-date-hidden").html(date);
                //load datepicker
                $('.input-group.date').datepicker({
                    orientation: "top left",
                    todayHighlight: true,
                    autoclose: true
                });
                
                                
                
                myDiary_MainClickRegisterFunction();
                var results = mlpObject.selectResults({assigneddate : date}).result;
                
                
                if (results["success"] === true){
                    var exercises = [];
                    for (var index in results["data"]){
                        var resultsObject = results["data"][index];
                        var exerciseName = mlpObject.getExercises({id : resultsObject["exerciseid"]}).result["data"][0]["name"];
                        var records = ["Best volume with 8 reps: 8x5 with 90kg", "Best rep total with 87.5kg: 9", "Lowest RPE for 87.5kg for 8 reps: 8.5", "Last time you did 5x5 with 100kg"]; //TODO
                        if (exerciseName in exercises){
                            exercises[exerciseName].push({id:resultsObject["id"], exercise:exerciseName, exerciseid:resultsObject["exerciseid"], reps:resultsObject["reps"], set:resultsObject["sets"], weight: resultsObject["weight"], rpe: resultsObject["rpe"], onerm: resultsObject["percentage"], notes : resultsObject["notes"], records: records});
                        }
                        else{
                            exercises[exerciseName] = [{id:resultsObject["id"], exercise:exerciseName, exerciseid:resultsObject["exerciseid"], reps:resultsObject["reps"], set:resultsObject["sets"], weight: resultsObject["weight"], rpe: resultsObject["rpe"], onerm: resultsObject["percentage"], notes : resultsObject["notes"], records: records}];
                        }
                    }
                    
                }
                //sort by set    
                for (var exercise in exercises){
                    myDiary_appendHTML(exercises[exercise].sort(function (a, b) {
                        if (a.set > b.set) {
                            return 1;
                        }
                        if (a.set < b.set) {
                            return -1;
                        }
                        // a must be equal to b
                        return 0;
                    }));
   
                }
                myDiary_appendHTML(test2Exercise); 
                $(".loader").hide();
        });    
    
    
    
}

function myDiary_ExerciseClickRegisterFunction(e){


	parent = $(e);
	if ($(e).hasClass("fa")){
		parent =  $(e).parent();
	}

	var exerciseName = parent.closest(".added-exercise").attr("class").split(" ")[1];

	if (parent.hasClass( "added" )){
		$("." + exerciseName + " .view-added").slideToggle();
	}
	else if (parent.hasClass( "log" )){
		$("." + exerciseName + " .view-log").slideToggle();
	}
	else if (parent.hasClass( "old" )){
		$("." + exerciseName + " .view-old").slideToggle();
	}

	
	else if (parent.hasClass( "exercise-settings" )){
		if(parent.closest(".old-set").hasClass("old-set")){
			parent.closest(".old-set").find(".view-exercise-settings").slideToggle();
		}
		else{
		$("." + exerciseName + " > .view-exercise-settings").slideToggle();
		}
	
	}
	else if (parent.hasClass("save-form")){
                $(".loader").show();
                var exerciseid = $("." + exerciseName + " .exerciseid").text();
                var assigneddate = $(".selected-date-hidden").text();
                var reps = $("." + exerciseName + " .details.reps input").val();
                var set = $("." + exerciseName + " .details.set input").val();
                var rpe = $("." + exerciseName + " .details.rpe input").val();
                var weight = $("." + exerciseName + " .details.weight input").val();
                var percentage = $("." + exerciseName + " .details.percentage input").val();
                
                mlpObject.addResults({exerciseid:exerciseid, reps:reps, sets:set, rpe:rpe, weight:weight, percentage:percentage, assigneddate: assigneddate});
                if (mlpObject.result["success"] === true){
                    $("." + exerciseName + " .view-added").slideToggle();
                    myDiary_Load(moment(assigneddate));
                    $('.bottom-right').notify({message: { type: 'info', text: 'New set added' }}).show();

                }
                else{
                    $('.bottom-right').notify({message: { type: 'danger', text: 'Failed to add set' }}).show();
                }
                $(".loader").hide();
	
	}
	
	
	else if (parent.hasClass("note")){
                var id = $("." + exerciseName + " .id :first").text();
                var notes = $("." + exerciseName + " .note :first").val();

                mlpObject.changeResults({id:id, notes:notes});
                if (mlpObject.result["success"] === false){
                    console.log("there was an error saving notes for: " + exerciseName + " id number: " + id);
                }                

	
	}	
	
	else if (parent.hasClass("edit")){
                var exerciseid = $("." + exerciseName + " .exerciseid").text();
                var assigneddate = $(".selected-date-hidden").text();
                var id,reps,set,weight,percentage;
                if(parent.closest(".old-set").hasClass("old-set")){  
                    //editing an old set
                    id = parent.closest(".old-set").find(".details.id").text();
                    reps = parent.closest(".old-set").find(".details.reps").text();
                    set = parent.closest(".old-set").find(".details.set").text();
                    rpe = parent.closest(".old-set").find(".details.rpe").text();
                    weight = parent.closest(".old-set").find(".details.weight").text();
                    percentage = parent.closest(".old-set").find(".details.percentage").text();                      
                    
                    
                } 
                else{
                    //editing the main/latest set
                    id = $("." + exerciseName + " .added .id :first").text();
                    reps = $("." + exerciseName + " .added .reps :first").text();
                    set = $("." + exerciseName + " .added .set :first").text();
                    rpe = $("." + exerciseName + " .added .rpe :first").text();
                    weight = $("." + exerciseName + " .added .weight :first").text();
                    percentage = $("." + exerciseName + " .added .percentage :first").text();                      
   
                }
                $(".edit-result-id").html(id);
                $(".edit-result-reps").val(reps);
                $(".edit-result-set").val(set);
                $(".edit-result-rpe").val(rpe);
                $(".edit-result-weight").val(weight.replace('kg',''));
                $(".edit-result-percentage").val(percentage.replace('%',''));
                

            
                $('#editModal').modal();

	}	

	else if (parent.hasClass("delete")){
                var id = 0;
		if(parent.closest(".old-set").hasClass("old-set")){
			id = parent.closest(".old-set").find(".id").text();
		}
		else{
                        id = $("." + exerciseName + " .id :first").text();
		}
                $(".delete-result-id").html(id);
                $('#deleteModal').modal();

	
	}

	else if (parent.hasClass("view-notes")){
                var id = 0;
		if(parent.closest(".old-set").hasClass("old-set")){
			id = parent.closest(".old-set").find(".id").text();
		}
		else{
                        id = $("." + exerciseName + " .id :first").text();
		}
                
                var results = mlpObject.selectResults({id : id}).result;
                if(results["success"] === true){
                    var note = results["data"][0]["notes"];
                    $(".modal-notes-contents").html(note);
                    $('#notesModal').modal();
                }
                else{
                    $('.bottom-right').notify({message: { type: 'danger', text: 'Note cannot be loaded' }}).show();
                }
	
	}
	
	else if (parent.hasClass("share-set")){
	
		console.log("trying to share for: " + exerciseName + " set index number: "); //TODO
	
	}	

	
}

//HTML generating functions
		
function myDiary_appendHTML(dataArray){
	var className = dataArray[0]["exercise"].replace(" ", "");

	$(".my-exercises").append(myDiary_generateHTML(dataArray));
	
	$("." + className + " .old").on("click",function(e){
		myDiary_ExerciseClickRegisterFunction(e.target);
	});		
	
	$("." + className + " .btn-circle").on("click",function(e){
		myDiary_ExerciseClickRegisterFunction(e.target);
	});
	$("." + className + " .btn-options").on("click",function(e){
		myDiary_ExerciseClickRegisterFunction(e.target);
	});	
	
	$("." + className + " .save-form").on("submit",function(e){
		e.preventDefault();
		myDiary_ExerciseClickRegisterFunction(e.target);
	});
	
	$(".note").handleKeyboardChange(1000).change(function(e){
    myDiary_ExerciseClickRegisterFunction(e.target);// value has changed!
	});
	
	toggleCaret("." + className + " .old", "." + className + " .old i", "fa-caret-up", "fa-caret-down");
	
	$("." + className + " .view-added").hide();
	$("." + className + " .view-log").hide();
	$("." + className + " .view-exercise-settings").hide();
	$("." + className + " .view-old").hide();
}



		
function myDiary_generateHTML(dataArrayOriginal){
        var dataArray = JSON.parse(JSON.stringify(dataArrayOriginal)); //clone array so pops dont affect the global array
	var lastSet = dataArray.pop();
	var constructedHTML = "";
        if (lastSet["notes"] === null){lastSet["notes"] = '';}
	constructedHTML = constructedHTML + '<div class="added-exercise ' + lastSet["exercise"].replace(" ", "") + '">' +
		'<div class="added row">' +
			'<div class="col-xs-6 exercise"><a href="javascript:void(0);" class="old ' + lastSet["exercise"].replace(" ", "") + '">' + lastSet["exercise"] + ' <i class="fa fa-caret-down"></i></a></div>' +	
			'<div class="col-xs-1 details exerciseid" style="display:none;">' + lastSet["exerciseid"] + '</div>' +
                        '<div class="col-xs-1 details id" style="display:none;">' + lastSet["id"] + '</div>' +
                        '<div class="col-xs-1 details reps">' + lastSet["reps"] + '</div>' +
			'<div class="col-xs-1 details set">' + lastSet["set"] + '</div>' +
			'<div class="col-xs-1 details weight">' + lastSet["weight"] + 'kg</div>' +
			'<div class="col-xs-1 details rpe">' + lastSet["rpe"] + '</div>' +
			'<div class="col-xs-1 details percentage">' + lastSet["onerm"] + '%</div>' +
			'<div class="col-xs-1 details add">' + 
				'<a href="javascript:void(0);" class="btn btn-default btn-circle added"><i class="fa fa-plus"></i></a>' + 
				'<a href="javascript:void(0);" class="btn btn-default btn-circle log"><i class="fa fa-book"></i></a>' + 
				'<a href="javascript:void(0);" class="btn btn-default btn-circle exercise-settings"><i class="fa fa-cog"></i></a>' + 
			'</div>' + 		
        '</div>' +
		'<div class="view-added row">' +
			'<div class="col-xs-6 headers" style="line-height:70px;"><i class="fa fa-plus"></i> New Set</div>' + 
			'<form role="form" class="save-form"><div class="form-group">' +
			'<div class="col-xs-1 details reps"><input type="number" class="form-control" placeholder="Reps" required></div>' +
			'<div class="col-xs-1 details set"><input type="number" class="form-control" placeholder="Set" required></div>' +
			'<div class="col-xs-1 details weight"><input type="number" class="form-control" placeholder="Weight"></div>' +
			'<div class="col-xs-1 details rpe"><input type="number" class="form-control" placeholder="RPE"></div>' +
			'<div class="col-xs-1 details percentage"><input type="number" class="form-control" placeholder="%1RM"></div>' +
			'<div class="col-xs-1"><button type="submit" class="btn btn-default save"><i class="fa fa-plus"></i> Add</button></div>' +
			'</div></form>'	+	
        '</div>' +  
	    '<div class="view-log row">' + 
			'<div class="col-xs-6 headers">Exercise Log</div>' + 
			'<form role="form"><div class="form-group">' + 
			'<div class="col-xs-5"><textarea class="form-control note" rows="5" placeholder="Write Notes">' + lastSet["notes"] + '</textarea></div>' + 
			'</div></form>' + 	
			'<div class="col-xs-4 history"><div class="headers">Records <i class="fa fa-trophy"></i></div>' + 
					'<div class="row records">' + lastSet["records"][0] + '</div>' + 
					'<div class="row records">' + lastSet["records"][1] + '</div>' + 
					'<div class="row records">' + lastSet["records"][2] + '</div>' + 
					'<div class="row records">' + lastSet["records"][3] + '</div>' + 
			'</div>' +	
        '</div>' +
		'<div class="view-exercise-settings row">' +
			'<div class="col-xs-6 headers">Settings</div>' +
			'<div class="col-xs-2"><a href="javascript:void(0);" class="btn btn-default btn-options edit" data-toggle="modal" data-target="#basicModal"><i class="fa fa-pencil-square-o"></i> Edit Set</a></div>' +
			'<div class="col-xs-2"><a href="javascript:void(0);" class="btn btn-default btn-options delete"><i class="fa fa-times"></i> Delete Set</a></div>' +
			'<div class="col-xs-2"><a href="javascript:void(0);" class="btn btn-default btn-options view-notes"><i class="fa fa-book"></i> View Notes</a></div>' +
			'<div class="col-xs-2"><a href="javascript:void(0);" class="btn btn-default btn-options share-set"><i class="fa fa-share-alt"></i> Share Set</a></div>' +	
        '</div>' +
	    '<div class="view-old">';
		
		while(dataArray.length){  
			oldSet = dataArray.pop();
			constructedHTML = constructedHTML +	
			'<div class="old-set">' +
			'<div class="added row">' +
				'<div class="col-xs-6 exercise">' + ' ' + '</div>' +
                                '<div class="col-xs-1 details id" style="display:none;">' + oldSet["id"] + '</div>' +
				'<div class="col-xs-1 details reps">' + oldSet["reps"] + '</div>' +
				'<div class="col-xs-1 details set">' + oldSet["set"] + '</div>' +
				'<div class="col-xs-1 details weight">' + oldSet["weight"] + 'kg</div>' +
				'<div class="col-xs-1 details rpe">' + oldSet["rpe"] + '</div>' +
				'<div class="col-xs-1 details percentage">' + oldSet["onerm"] + '%</div>' +
				'<div class="col-xs-1 details add">' +
					'<a href="javascript:void(0);" class="btn btn-default btn-circle exercise-settings"><i class="fa fa-cog"></i></a>' +
				'</div>' +			
            '</div>' +	  
			'<div class="view-exercise-settings row">' +	
				'<div class="col-xs-6 headers">Settings</div>' +	
				'<div class="col-xs-2"><a href="javascript:void(0);" class="btn btn-default btn-options edit"><i class="fa fa-pencil-square-o"></i> Edit Set</a></div>' +	
				'<div class="col-xs-2"><a href="javascript:void(0);" class="btn btn-default btn-options delete"><i class="fa fa-times"></i> Delete Set</a></div>' +	
				'<div class="col-xs-2"><a href="javascript:void(0);" class="btn btn-default btn-options view-notes"><i class="fa fa-book"></i> View Notes</a></div>' +	
				'<div class="col-xs-2"><a href="javascript:void(0);" class="btn btn-default btn-options share-set"><i class="fa fa-share-alt"></i> Share Set</a></div>' +	
			'</div>' +
			'</div>';	  
		}
		
	    constructedHTML = constructedHTML  +	
		'</div>' +
	  '<hr/>' +
	  '</div>';
	  
	  return constructedHTML;
}	

/*END MY DIARY FUNCTIONS*/




/* GENERAL HELPER FUNCTIONS */


function toggleCaret(hrefClass, caretClass, caretClass1, caretClass2){
 
	$(hrefClass).on("click",function(e){
		if ($(caretClass).hasClass(caretClass1)){
			$(caretClass).removeClass(caretClass1);
			$(caretClass).addClass(caretClass2);
		}
		else{
			$(caretClass).removeClass(caretClass2);
			$(caretClass).addClass(caretClass1);
		}
		
		
	});
	}

/*END GENERAL HELPER FUNCTIONS */	
	
</script>

</body>
</html>
